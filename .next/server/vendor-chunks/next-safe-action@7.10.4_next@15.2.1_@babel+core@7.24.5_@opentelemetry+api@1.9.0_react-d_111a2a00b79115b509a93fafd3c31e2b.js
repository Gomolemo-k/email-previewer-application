"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/next-safe-action@7.10.4_next@15.2.1_@babel+core@7.24.5_@opentelemetry+api@1.9.0_react-d_111a2a00b79115b509a93fafd3c31e2b";
exports.ids = ["vendor-chunks/next-safe-action@7.10.4_next@15.2.1_@babel+core@7.24.5_@opentelemetry+api@1.9.0_react-d_111a2a00b79115b509a93fafd3c31e2b"];
exports.modules = {

/***/ "(action-browser)/./node_modules/.pnpm/next-safe-action@7.10.4_next@15.2.1_@babel+core@7.24.5_@opentelemetry+api@1.9.0_react-d_111a2a00b79115b509a93fafd3c31e2b/node_modules/next-safe-action/dist/index.mjs":
/*!**************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next-safe-action@7.10.4_next@15.2.1_@babel+core@7.24.5_@opentelemetry+api@1.9.0_react-d_111a2a00b79115b509a93fafd3c31e2b/node_modules/next-safe-action/dist/index.mjs ***!
  \**************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ActionMetadataValidationError: () => (/* binding */ ActionMetadataValidationError),\n/* harmony export */   ActionOutputDataValidationError: () => (/* binding */ ActionOutputDataValidationError),\n/* harmony export */   ActionValidationError: () => (/* binding */ ActionValidationError),\n/* harmony export */   DEFAULT_SERVER_ERROR_MESSAGE: () => (/* binding */ DEFAULT_SERVER_ERROR_MESSAGE),\n/* harmony export */   createMiddleware: () => (/* binding */ createMiddleware),\n/* harmony export */   createSafeActionClient: () => (/* binding */ createSafeActionClient),\n/* harmony export */   flattenBindArgsValidationErrors: () => (/* binding */ flattenBindArgsValidationErrors),\n/* harmony export */   flattenValidationErrors: () => (/* binding */ flattenValidationErrors),\n/* harmony export */   formatBindArgsValidationErrors: () => (/* binding */ formatBindArgsValidationErrors),\n/* harmony export */   formatValidationErrors: () => (/* binding */ formatValidationErrors),\n/* harmony export */   returnValidationErrors: () => (/* binding */ returnValidationErrors)\n/* harmony export */ });\n// src/adapters/zod.ts\nvar ZodAdapter = class {\n\tasync validate(schema, data) {\n\t\tconst result = await schema.safeParseAsync(data);\n\t\tif (result.success) {\n\t\t\treturn {\n\t\t\t\tsuccess: true,\n\t\t\t\tdata: result.data,\n\t\t\t};\n\t\t}\n\t\treturn {\n\t\t\tsuccess: false,\n\t\t\tissues: result.error.issues.map(({ message, path }) => ({ message, path })),\n\t\t};\n\t}\n};\nfunction zodAdapter() {\n\treturn new ZodAdapter();\n}\n\n// ../../node_modules/.pnpm/deepmerge-ts@7.1.4/node_modules/deepmerge-ts/dist/index.mjs\nvar actions = {\n\tdefaultMerge: Symbol(\"deepmerge-ts: default merge\"),\n\tskip: Symbol(\"deepmerge-ts: skip\"),\n};\nvar actionsInto = {\n\tdefaultMerge: actions.defaultMerge,\n};\nfunction defaultMetaDataUpdater(previousMeta, metaMeta) {\n\treturn metaMeta;\n}\nfunction defaultFilterValues(values, meta) {\n\treturn values.filter((value) => value !== void 0);\n}\nvar ObjectType;\n(function (ObjectType2) {\n\tObjectType2[(ObjectType2[\"NOT\"] = 0)] = \"NOT\";\n\tObjectType2[(ObjectType2[\"RECORD\"] = 1)] = \"RECORD\";\n\tObjectType2[(ObjectType2[\"ARRAY\"] = 2)] = \"ARRAY\";\n\tObjectType2[(ObjectType2[\"SET\"] = 3)] = \"SET\";\n\tObjectType2[(ObjectType2[\"MAP\"] = 4)] = \"MAP\";\n\tObjectType2[(ObjectType2[\"OTHER\"] = 5)] = \"OTHER\";\n})(ObjectType || (ObjectType = {}));\nfunction getObjectType(object) {\n\tif (typeof object !== \"object\" || object === null) {\n\t\treturn 0;\n\t}\n\tif (Array.isArray(object)) {\n\t\treturn 2;\n\t}\n\tif (isRecord(object)) {\n\t\treturn 1;\n\t}\n\tif (object instanceof Set) {\n\t\treturn 3;\n\t}\n\tif (object instanceof Map) {\n\t\treturn 4;\n\t}\n\treturn 5;\n}\nfunction getKeys(objects) {\n\tconst keys = /* @__PURE__ */ new Set();\n\tfor (const object of objects) {\n\t\tfor (const key of [...Object.keys(object), ...Object.getOwnPropertySymbols(object)]) {\n\t\t\tkeys.add(key);\n\t\t}\n\t}\n\treturn keys;\n}\nfunction objectHasProperty(object, property) {\n\treturn typeof object === \"object\" && Object.prototype.propertyIsEnumerable.call(object, property);\n}\nfunction getIterableOfIterables(iterables) {\n\tlet m_iterablesIndex = 0;\n\tlet m_iterator = iterables[0]?.[Symbol.iterator]();\n\treturn {\n\t\t[Symbol.iterator]() {\n\t\t\treturn {\n\t\t\t\tnext() {\n\t\t\t\t\tdo {\n\t\t\t\t\t\tif (m_iterator === void 0) {\n\t\t\t\t\t\t\treturn { done: true, value: void 0 };\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst result = m_iterator.next();\n\t\t\t\t\t\tif (result.done === true) {\n\t\t\t\t\t\t\tm_iterablesIndex += 1;\n\t\t\t\t\t\t\tm_iterator = iterables[m_iterablesIndex]?.[Symbol.iterator]();\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tdone: false,\n\t\t\t\t\t\t\tvalue: result.value,\n\t\t\t\t\t\t};\n\t\t\t\t\t} while (true);\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t};\n}\nvar validRecordToStringValues = [\"[object Object]\", \"[object Module]\"];\nfunction isRecord(value) {\n\tif (!validRecordToStringValues.includes(Object.prototype.toString.call(value))) {\n\t\treturn false;\n\t}\n\tconst { constructor } = value;\n\tif (constructor === void 0) {\n\t\treturn true;\n\t}\n\tconst prototype = constructor.prototype;\n\tif (\n\t\tprototype === null ||\n\t\ttypeof prototype !== \"object\" ||\n\t\t!validRecordToStringValues.includes(Object.prototype.toString.call(prototype))\n\t) {\n\t\treturn false;\n\t}\n\tif (!prototype.hasOwnProperty(\"isPrototypeOf\")) {\n\t\treturn false;\n\t}\n\treturn true;\n}\nfunction mergeRecords$1(values, utils, meta) {\n\tconst result = {};\n\tfor (const key of getKeys(values)) {\n\t\tconst propValues = [];\n\t\tfor (const value of values) {\n\t\t\tif (objectHasProperty(value, key)) {\n\t\t\t\tpropValues.push(value[key]);\n\t\t\t}\n\t\t}\n\t\tif (propValues.length === 0) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst updatedMeta = utils.metaDataUpdater(meta, {\n\t\t\tkey,\n\t\t\tparents: values,\n\t\t});\n\t\tconst propertyResult = mergeUnknowns(propValues, utils, updatedMeta);\n\t\tif (propertyResult === actions.skip) {\n\t\t\tcontinue;\n\t\t}\n\t\tif (key === \"__proto__\") {\n\t\t\tObject.defineProperty(result, key, {\n\t\t\t\tvalue: propertyResult,\n\t\t\t\tconfigurable: true,\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: true,\n\t\t\t});\n\t\t} else {\n\t\t\tresult[key] = propertyResult;\n\t\t}\n\t}\n\treturn result;\n}\nfunction mergeArrays$1(values) {\n\treturn values.flat();\n}\nfunction mergeSets$1(values) {\n\treturn new Set(getIterableOfIterables(values));\n}\nfunction mergeMaps$1(values) {\n\treturn new Map(getIterableOfIterables(values));\n}\nfunction mergeOthers$1(values) {\n\treturn values.at(-1);\n}\nvar mergeFunctions = {\n\tmergeRecords: mergeRecords$1,\n\tmergeArrays: mergeArrays$1,\n\tmergeSets: mergeSets$1,\n\tmergeMaps: mergeMaps$1,\n\tmergeOthers: mergeOthers$1,\n};\nfunction deepmerge(...objects) {\n\treturn deepmergeCustom({})(...objects);\n}\nfunction deepmergeCustom(options, rootMetaData) {\n\tconst utils = getUtils(options, customizedDeepmerge);\n\tfunction customizedDeepmerge(...objects) {\n\t\treturn mergeUnknowns(objects, utils, rootMetaData);\n\t}\n\treturn customizedDeepmerge;\n}\nfunction getUtils(options, customizedDeepmerge) {\n\treturn {\n\t\tdefaultMergeFunctions: mergeFunctions,\n\t\tmergeFunctions: {\n\t\t\t...mergeFunctions,\n\t\t\t...Object.fromEntries(\n\t\t\t\tObject.entries(options)\n\t\t\t\t\t.filter(([key, option]) => Object.hasOwn(mergeFunctions, key))\n\t\t\t\t\t.map(([key, option]) => (option === false ? [key, mergeFunctions.mergeOthers] : [key, option]))\n\t\t\t),\n\t\t},\n\t\tmetaDataUpdater: options.metaDataUpdater ?? defaultMetaDataUpdater,\n\t\tdeepmerge: customizedDeepmerge,\n\t\tuseImplicitDefaultMerging: options.enableImplicitDefaultMerging ?? false,\n\t\tfilterValues: options.filterValues === false ? void 0 : (options.filterValues ?? defaultFilterValues),\n\t\tactions,\n\t};\n}\nfunction mergeUnknowns(values, utils, meta) {\n\tconst filteredValues = utils.filterValues?.(values, meta) ?? values;\n\tif (filteredValues.length === 0) {\n\t\treturn void 0;\n\t}\n\tif (filteredValues.length === 1) {\n\t\treturn mergeOthers(filteredValues, utils, meta);\n\t}\n\tconst type = getObjectType(filteredValues[0]);\n\tif (type !== 0 && type !== 5) {\n\t\tfor (let m_index = 1; m_index < filteredValues.length; m_index++) {\n\t\t\tif (getObjectType(filteredValues[m_index]) === type) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\treturn mergeOthers(filteredValues, utils, meta);\n\t\t}\n\t}\n\tswitch (type) {\n\t\tcase 1: {\n\t\t\treturn mergeRecords(filteredValues, utils, meta);\n\t\t}\n\t\tcase 2: {\n\t\t\treturn mergeArrays(filteredValues, utils, meta);\n\t\t}\n\t\tcase 3: {\n\t\t\treturn mergeSets(filteredValues, utils, meta);\n\t\t}\n\t\tcase 4: {\n\t\t\treturn mergeMaps(filteredValues, utils, meta);\n\t\t}\n\t\tdefault: {\n\t\t\treturn mergeOthers(filteredValues, utils, meta);\n\t\t}\n\t}\n}\nfunction mergeRecords(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeRecords(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeRecords !== utils.defaultMergeFunctions.mergeRecords)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeRecords(values, utils, meta);\n\t}\n\treturn result;\n}\nfunction mergeArrays(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeArrays(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeArrays !== utils.defaultMergeFunctions.mergeArrays)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeArrays(values);\n\t}\n\treturn result;\n}\nfunction mergeSets(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeSets(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeSets !== utils.defaultMergeFunctions.mergeSets)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeSets(values);\n\t}\n\treturn result;\n}\nfunction mergeMaps(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeMaps(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeMaps !== utils.defaultMergeFunctions.mergeMaps)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeMaps(values);\n\t}\n\treturn result;\n}\nfunction mergeOthers(values, utils, meta) {\n\tconst result = utils.mergeFunctions.mergeOthers(values, utils, meta);\n\tif (\n\t\tresult === actions.defaultMerge ||\n\t\t(utils.useImplicitDefaultMerging &&\n\t\t\tresult === void 0 &&\n\t\t\tutils.mergeFunctions.mergeOthers !== utils.defaultMergeFunctions.mergeOthers)\n\t) {\n\t\treturn utils.defaultMergeFunctions.mergeOthers(values);\n\t}\n\treturn result;\n}\n\n// src/next/errors/bailout-to-csr.ts\nvar BAILOUT_TO_CSR = \"BAILOUT_TO_CLIENT_SIDE_RENDERING\";\nfunction isBailoutToCSRError(err) {\n\tif (typeof err !== \"object\" || err === null || !(\"digest\" in err)) {\n\t\treturn false;\n\t}\n\treturn err.digest === BAILOUT_TO_CSR;\n}\n\n// src/next/errors/http-access-fallback.ts\nvar HTTPAccessErrorStatus = {\n\tNOT_FOUND: 404,\n\tFORBIDDEN: 403,\n\tUNAUTHORIZED: 401,\n};\nvar ALLOWED_CODES = new Set(Object.values(HTTPAccessErrorStatus));\nvar HTTP_ERROR_FALLBACK_ERROR_CODE = \"NEXT_HTTP_ERROR_FALLBACK\";\nfunction isHTTPAccessFallbackError(error) {\n\tif (typeof error !== \"object\" || error === null || !(\"digest\" in error) || typeof error.digest !== \"string\") {\n\t\treturn false;\n\t}\n\tconst [prefix, httpStatus] = error.digest.split(\";\");\n\treturn prefix === HTTP_ERROR_FALLBACK_ERROR_CODE && ALLOWED_CODES.has(Number(httpStatus));\n}\nfunction getAccessFallbackHTTPStatus(error) {\n\tconst httpStatus = error.digest.split(\";\")[1];\n\treturn Number(httpStatus);\n}\n\n// src/next/errors/redirect.ts\nvar RedirectStatusCode = /* @__PURE__ */ ((RedirectStatusCode2) => {\n\tRedirectStatusCode2[(RedirectStatusCode2[\"SeeOther\"] = 303)] = \"SeeOther\";\n\tRedirectStatusCode2[(RedirectStatusCode2[\"TemporaryRedirect\"] = 307)] = \"TemporaryRedirect\";\n\tRedirectStatusCode2[(RedirectStatusCode2[\"PermanentRedirect\"] = 308)] = \"PermanentRedirect\";\n\treturn RedirectStatusCode2;\n})(RedirectStatusCode || {});\nvar REDIRECT_ERROR_CODE = \"NEXT_REDIRECT\";\nfunction isRedirectError(error) {\n\tif (typeof error !== \"object\" || error === null || !(\"digest\" in error) || typeof error.digest !== \"string\") {\n\t\treturn false;\n\t}\n\tconst digest = error.digest.split(\";\");\n\tconst [errorCode, type] = digest;\n\tconst destination = digest.slice(2, -2).join(\";\");\n\tconst status = digest.at(-2);\n\tconst statusCode = Number(status);\n\treturn (\n\t\terrorCode === REDIRECT_ERROR_CODE &&\n\t\t(type === \"replace\" || type === \"push\") &&\n\t\ttypeof destination === \"string\" &&\n\t\t!isNaN(statusCode) &&\n\t\tstatusCode in RedirectStatusCode\n\t);\n}\n\n// src/next/errors/router.ts\nfunction isNextRouterError(error) {\n\treturn isRedirectError(error) || isHTTPAccessFallbackError(error);\n}\n\n// src/next/errors/dynamic-usage.ts\nvar DYNAMIC_ERROR_CODE = \"DYNAMIC_SERVER_USAGE\";\nfunction isDynamicServerError(err) {\n\tif (typeof err !== \"object\" || err === null || !(\"digest\" in err) || typeof err.digest !== \"string\") {\n\t\treturn false;\n\t}\n\treturn err.digest === DYNAMIC_ERROR_CODE;\n}\nfunction isDynamicPostponeReason(reason) {\n\treturn (\n\t\treason.includes(\"needs to bail out of prerendering at this point because it used\") &&\n\t\treason.includes(\"Learn more: https://nextjs.org/docs/messages/ppr-caught-error\")\n\t);\n}\nfunction isDynamicPostpone(err) {\n\tif (\n\t\ttypeof err === \"object\" &&\n\t\terr !== null && // eslint-disable-next-line\n\t\ttypeof err.message === \"string\"\n\t) {\n\t\treturn isDynamicPostponeReason(err.message);\n\t}\n\treturn false;\n}\nvar isDynamicUsageError = (err) =>\n\tisDynamicServerError(err) || isBailoutToCSRError(err) || isNextRouterError(err) || isDynamicPostpone(err);\n\n// src/next/errors/postpone.ts\nvar REACT_POSTPONE_TYPE = Symbol.for(\"react.postpone\");\nfunction isPostpone(error) {\n\treturn (\n\t\ttypeof error === \"object\" &&\n\t\terror !== null && // eslint-disable-next-line\n\t\terror.$$typeof === REACT_POSTPONE_TYPE\n\t);\n}\n\n// src/next/errors/index.ts\nvar FrameworkErrorHandler = class _FrameworkErrorHandler {\n\t#frameworkError;\n\tstatic isFrameworkError(error) {\n\t\treturn isNextRouterError(error) || isBailoutToCSRError(error) || isDynamicUsageError(error) || isPostpone(error);\n\t}\n\thandleError(e) {\n\t\tif (_FrameworkErrorHandler.isFrameworkError(e)) {\n\t\t\tthis.#frameworkError = e;\n\t\t\treturn;\n\t\t}\n\t\tthrow e;\n\t}\n\tget error() {\n\t\treturn this.#frameworkError;\n\t}\n\tget isRedirectError() {\n\t\treturn isRedirectError(this.#frameworkError);\n\t}\n\tget isNotFoundError() {\n\t\treturn isHTTPAccessFallbackError(this.#frameworkError) && getAccessFallbackHTTPStatus(this.#frameworkError) === 404;\n\t}\n\tget isForbiddenError() {\n\t\treturn isHTTPAccessFallbackError(this.#frameworkError) && getAccessFallbackHTTPStatus(this.#frameworkError) === 403;\n\t}\n\tget isUnauthorizedError() {\n\t\treturn isHTTPAccessFallbackError(this.#frameworkError) && getAccessFallbackHTTPStatus(this.#frameworkError) === 401;\n\t}\n};\n\n// src/utils.ts\nvar DEFAULT_SERVER_ERROR_MESSAGE = \"Something went wrong while executing the operation.\";\nvar isError = (error) => error instanceof Error;\nvar winningBoolean = (...args) => {\n\treturn args.reduce((acc, v) => (typeof v === \"boolean\" ? v : acc), false);\n};\n\n// src/validation-errors.ts\nvar buildValidationErrors = (issues) => {\n\tconst ve = {};\n\tfor (const issue of issues) {\n\t\tconst { path, message } = issue;\n\t\tif (!path || path.length === 0) {\n\t\t\tve._errors = ve._errors ? [...ve._errors, message] : [message];\n\t\t\tcontinue;\n\t\t}\n\t\tlet ref = ve;\n\t\tfor (let i = 0; i < path.length - 1; i++) {\n\t\t\tconst k = path[i];\n\t\t\tif (!ref[k]) {\n\t\t\t\tref[k] = {};\n\t\t\t}\n\t\t\tref = ref[k];\n\t\t}\n\t\tconst key = path[path.length - 1];\n\t\tref[key] = ref[key]?._errors\n\t\t\t? {\n\t\t\t\t\t...structuredClone(ref[key]),\n\t\t\t\t\t_errors: [...ref[key]._errors, message],\n\t\t\t\t}\n\t\t\t: { ...structuredClone(ref[key]), _errors: [message] };\n\t}\n\treturn ve;\n};\nvar ActionServerValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Server Action server validation error(s) occurred\");\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nvar ActionValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Server Action validation error(s) occurred\");\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nfunction returnValidationErrors(schema, validationErrors) {\n\tthrow new ActionServerValidationError(validationErrors);\n}\nfunction formatValidationErrors(validationErrors) {\n\treturn validationErrors;\n}\nfunction formatBindArgsValidationErrors(bindArgsValidationErrors) {\n\treturn bindArgsValidationErrors;\n}\nfunction flattenValidationErrors(validationErrors) {\n\tconst flattened = {\n\t\tformErrors: [],\n\t\tfieldErrors: {},\n\t};\n\tfor (const [key, value] of Object.entries(validationErrors ?? {})) {\n\t\tif (key === \"_errors\" && Array.isArray(value)) {\n\t\t\tflattened.formErrors = [...value];\n\t\t} else {\n\t\t\tif (\"_errors\" in value) {\n\t\t\t\tflattened.fieldErrors[key] = [...value._errors];\n\t\t\t}\n\t\t}\n\t}\n\treturn flattened;\n}\nfunction flattenBindArgsValidationErrors(bindArgsValidationErrors) {\n\treturn bindArgsValidationErrors.map((ve) => flattenValidationErrors(ve));\n}\nvar ActionMetadataValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\"Invalid metadata input. Please be sure to pass metadata via `metadata` method before defining the action.\");\n\t\tthis.name = \"ActionMetadataError\";\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\nvar ActionOutputDataValidationError = class extends Error {\n\tvalidationErrors;\n\tconstructor(validationErrors) {\n\t\tsuper(\n\t\t\t\"Invalid action data (output). Please be sure to return data following the shape of the schema passed to `dataSchema` method.\"\n\t\t);\n\t\tthis.name = \"ActionOutputDataError\";\n\t\tthis.validationErrors = validationErrors;\n\t}\n};\n\n// src/action-builder.ts\nfunction actionBuilder(args) {\n\tconst bindArgsSchemas = args.bindArgsSchemas ?? [];\n\tfunction buildAction({ withState }) {\n\t\treturn {\n\t\t\taction: (serverCodeFn, utils) => {\n\t\t\t\treturn async (...clientInputs) => {\n\t\t\t\t\tlet currentCtx = {};\n\t\t\t\t\tconst middlewareResult = { success: false };\n\t\t\t\t\tlet prevResult = void 0;\n\t\t\t\t\tconst parsedInputDatas = [];\n\t\t\t\t\tconst frameworkErrorHandler = new FrameworkErrorHandler();\n\t\t\t\t\tif (withState) {\n\t\t\t\t\t\tprevResult = clientInputs.splice(bindArgsSchemas.length, 1)[0];\n\t\t\t\t\t}\n\t\t\t\t\tif (bindArgsSchemas.length + 1 > clientInputs.length) {\n\t\t\t\t\t\tclientInputs.push(void 0);\n\t\t\t\t\t}\n\t\t\t\t\tconst executeMiddlewareStack = async (idx = 0) => {\n\t\t\t\t\t\tif (frameworkErrorHandler.error) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst middlewareFn = args.middlewareFns[idx];\n\t\t\t\t\t\tmiddlewareResult.ctx = currentCtx;\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tif (idx === 0) {\n\t\t\t\t\t\t\t\tif (args.metadataSchema) {\n\t\t\t\t\t\t\t\t\tconst parsedMd = await args.validationAdapter.validate(args.metadataSchema, args.metadata);\n\t\t\t\t\t\t\t\t\tif (!parsedMd.success) {\n\t\t\t\t\t\t\t\t\t\tthrow new ActionMetadataValidationError(buildValidationErrors(parsedMd.issues));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (middlewareFn) {\n\t\t\t\t\t\t\t\tawait middlewareFn({\n\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t// pass raw client input\n\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\tnext: async (nextOpts) => {\n\t\t\t\t\t\t\t\t\t\tcurrentCtx = deepmerge(currentCtx, nextOpts?.ctx ?? {});\n\t\t\t\t\t\t\t\t\t\tawait executeMiddlewareStack(idx + 1);\n\t\t\t\t\t\t\t\t\t\treturn middlewareResult;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}).catch((e) => frameworkErrorHandler.handleError(e));\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst parsedInputs = await Promise.all(\n\t\t\t\t\t\t\t\t\tclientInputs.map(async (input, i) => {\n\t\t\t\t\t\t\t\t\t\tif (i === clientInputs.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\tif (typeof args.inputSchemaFn === \"undefined\") {\n\t\t\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\t\t\tsuccess: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\tdata: void 0,\n\t\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\treturn args.validationAdapter.validate(await args.inputSchemaFn(), input);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treturn args.validationAdapter.validate(bindArgsSchemas[i], input);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tlet hasBindValidationErrors = false;\n\t\t\t\t\t\t\t\tconst bindArgsValidationErrors = Array(parsedInputs.length - 1).fill({});\n\t\t\t\t\t\t\t\tfor (let i = 0; i < parsedInputs.length; i++) {\n\t\t\t\t\t\t\t\t\tconst parsedInput = parsedInputs[i];\n\t\t\t\t\t\t\t\t\tif (parsedInput.success) {\n\t\t\t\t\t\t\t\t\t\tparsedInputDatas.push(parsedInput.data);\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (i < parsedInputs.length - 1) {\n\t\t\t\t\t\t\t\t\t\t\tbindArgsValidationErrors[i] = buildValidationErrors(parsedInput.issues);\n\t\t\t\t\t\t\t\t\t\t\thasBindValidationErrors = true;\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tconst validationErrors = buildValidationErrors(parsedInput.issues);\n\t\t\t\t\t\t\t\t\t\t\tmiddlewareResult.validationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\t\t\t\targs.handleValidationErrorsShape(validationErrors, {\n\t\t\t\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (hasBindValidationErrors) {\n\t\t\t\t\t\t\t\t\tmiddlewareResult.bindArgsValidationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\t\targs.handleBindArgsValidationErrorsShape(bindArgsValidationErrors, {\n\t\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (middlewareResult.validationErrors || middlewareResult.bindArgsValidationErrors) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst scfArgs = [];\n\t\t\t\t\t\t\t\tscfArgs[0] = {\n\t\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\tif (withState) {\n\t\t\t\t\t\t\t\t\tscfArgs[1] = { prevResult: structuredClone(prevResult) };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst data = await serverCodeFn(...scfArgs).catch((e) => frameworkErrorHandler.handleError(e));\n\t\t\t\t\t\t\t\tif (typeof args.outputSchema !== \"undefined\" && !frameworkErrorHandler.error) {\n\t\t\t\t\t\t\t\t\tconst parsedData = await args.validationAdapter.validate(args.outputSchema, data);\n\t\t\t\t\t\t\t\t\tif (!parsedData.success) {\n\t\t\t\t\t\t\t\t\t\tthrow new ActionOutputDataValidationError(buildValidationErrors(parsedData.issues));\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tmiddlewareResult.success = true;\n\t\t\t\t\t\t\t\tmiddlewareResult.data = data;\n\t\t\t\t\t\t\t\tmiddlewareResult.parsedInput = parsedInputDatas.at(-1);\n\t\t\t\t\t\t\t\tmiddlewareResult.bindArgsParsedInputs = parsedInputDatas.slice(0, -1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tif (e instanceof ActionServerValidationError) {\n\t\t\t\t\t\t\t\tconst ve = e.validationErrors;\n\t\t\t\t\t\t\t\tmiddlewareResult.validationErrors = await Promise.resolve(\n\t\t\t\t\t\t\t\t\targs.handleValidationErrorsShape(ve, {\n\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst error = isError(e) ? e : new Error(DEFAULT_SERVER_ERROR_MESSAGE);\n\t\t\t\t\t\t\t\tconst returnedError = await Promise.resolve(\n\t\t\t\t\t\t\t\t\targs.handleServerError(error, {\n\t\t\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\t\t\t// pass raw client input\n\t\t\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tmiddlewareResult.serverError = returnedError;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tawait executeMiddlewareStack();\n\t\t\t\t\tconst callbackPromises = [];\n\t\t\t\t\tif (frameworkErrorHandler.error) {\n\t\t\t\t\t\tcallbackPromises.push(\n\t\t\t\t\t\t\tutils?.onSuccess?.({\n\t\t\t\t\t\t\t\tdata: void 0,\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\thasRedirected: frameworkErrorHandler.isRedirectError,\n\t\t\t\t\t\t\t\thasNotFound: frameworkErrorHandler.isNotFoundError,\n\t\t\t\t\t\t\t\thasForbidden: frameworkErrorHandler.isForbiddenError,\n\t\t\t\t\t\t\t\thasUnauthorized: frameworkErrorHandler.isUnauthorizedError,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcallbackPromises.push(\n\t\t\t\t\t\t\tutils?.onSettled?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tresult: {},\n\t\t\t\t\t\t\t\thasRedirected: frameworkErrorHandler.isRedirectError,\n\t\t\t\t\t\t\t\thasNotFound: frameworkErrorHandler.isNotFoundError,\n\t\t\t\t\t\t\t\thasForbidden: frameworkErrorHandler.isForbiddenError,\n\t\t\t\t\t\t\t\thasUnauthorized: frameworkErrorHandler.isUnauthorizedError,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t\tawait Promise.all(callbackPromises);\n\t\t\t\t\t\tthrow frameworkErrorHandler.error;\n\t\t\t\t\t}\n\t\t\t\t\tconst actionResult = {};\n\t\t\t\t\tif (typeof middlewareResult.validationErrors !== \"undefined\") {\n\t\t\t\t\t\tif (winningBoolean(args.throwValidationErrors, utils?.throwValidationErrors)) {\n\t\t\t\t\t\t\tthrow new ActionValidationError(middlewareResult.validationErrors);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactionResult.validationErrors = middlewareResult.validationErrors;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof middlewareResult.bindArgsValidationErrors !== \"undefined\") {\n\t\t\t\t\t\tactionResult.bindArgsValidationErrors = middlewareResult.bindArgsValidationErrors;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof middlewareResult.serverError !== \"undefined\") {\n\t\t\t\t\t\tif (utils?.throwServerError) {\n\t\t\t\t\t\t\tthrow middlewareResult.serverError;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tactionResult.serverError = middlewareResult.serverError;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (middlewareResult.success) {\n\t\t\t\t\t\tif (typeof middlewareResult.data !== \"undefined\") {\n\t\t\t\t\t\t\tactionResult.data = middlewareResult.data;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tcallbackPromises.push(\n\t\t\t\t\t\t\tutils?.onSuccess?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tdata: actionResult.data,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\tparsedInput: parsedInputDatas.at(-1),\n\t\t\t\t\t\t\t\tbindArgsParsedInputs: parsedInputDatas.slice(0, -1),\n\t\t\t\t\t\t\t\thasRedirected: false,\n\t\t\t\t\t\t\t\thasNotFound: false,\n\t\t\t\t\t\t\t\thasForbidden: false,\n\t\t\t\t\t\t\t\thasUnauthorized: false,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcallbackPromises.push(\n\t\t\t\t\t\t\tutils?.onError?.({\n\t\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\t\terror: actionResult,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcallbackPromises.push(\n\t\t\t\t\t\tutils?.onSettled?.({\n\t\t\t\t\t\t\tmetadata: args.metadata,\n\t\t\t\t\t\t\tctx: currentCtx,\n\t\t\t\t\t\t\tclientInput: clientInputs.at(-1),\n\t\t\t\t\t\t\tbindArgsClientInputs: bindArgsSchemas.length ? clientInputs.slice(0, -1) : [],\n\t\t\t\t\t\t\tresult: actionResult,\n\t\t\t\t\t\t\thasRedirected: false,\n\t\t\t\t\t\t\thasNotFound: false,\n\t\t\t\t\t\t\thasForbidden: false,\n\t\t\t\t\t\t\thasUnauthorized: false,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tawait Promise.all(callbackPromises);\n\t\t\t\t\treturn actionResult;\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t}\n\treturn {\n\t\t/**\n\t\t * Define the action.\n\t\t * @param serverCodeFn Code that will be executed on the **server side**\n\t\t *\n\t\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t\t */\n\t\taction: buildAction({ withState: false }).action,\n\t\t/**\n\t\t * Define the stateful action. To be used with the [`useStateAction`](https://next-safe-action.dev/docs/execute-actions/hooks/usestateaction) hook.\n\t\t * @param serverCodeFn Code that will be executed on the **server side**\n\t\t *\n\t\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t\t */\n\t\tstateAction: buildAction({ withState: true }).action,\n\t};\n}\n\n// src/safe-action-client.ts\nvar SafeActionClient = class _SafeActionClient {\n\t#handleServerError;\n\t#middlewareFns;\n\t#metadataSchema;\n\t#metadata;\n\t#inputSchemaFn;\n\t#outputSchema;\n\t#ctxType;\n\t#bindArgsSchemas;\n\t#validationAdapter;\n\t#handleValidationErrorsShape;\n\t#handleBindArgsValidationErrorsShape;\n\t#defaultValidationErrorsShape;\n\t#throwValidationErrors;\n\tconstructor(opts) {\n\t\tthis.#middlewareFns = opts.middlewareFns;\n\t\tthis.#handleServerError = opts.handleServerError;\n\t\tthis.#metadataSchema = opts.metadataSchema;\n\t\tthis.#metadata = opts.metadata;\n\t\tthis.#inputSchemaFn = opts.inputSchemaFn ?? void 0;\n\t\tthis.#outputSchema = opts.outputSchema;\n\t\tthis.#bindArgsSchemas = opts.bindArgsSchemas ?? [];\n\t\tthis.#validationAdapter = opts.validationAdapter;\n\t\tthis.#ctxType = opts.ctxType;\n\t\tthis.#handleValidationErrorsShape = opts.handleValidationErrorsShape;\n\t\tthis.#handleBindArgsValidationErrorsShape = opts.handleBindArgsValidationErrorsShape;\n\t\tthis.#defaultValidationErrorsShape = opts.defaultValidationErrorsShape;\n\t\tthis.#throwValidationErrors = opts.throwValidationErrors;\n\t}\n\t/**\n\t * Use a middleware function.\n\t * @param middlewareFn Middleware function\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#use See docs for more information}\n\t */\n\tuse(middlewareFn) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: [...this.#middlewareFns, middlewareFn],\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define metadata for the action.\n\t * @param data Metadata with the same type as the return value of the [`defineMetadataSchema`](https://next-safe-action.dev/docs/define-actions/create-the-client#definemetadataschema) optional initialization function\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#metadata See docs for more information}\n\t */\n\tmetadata(data) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: data,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the input validation schema for the action.\n\t * @param inputSchema Input validation schema\n\t * @param utils Optional utils object\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/create-the-client#inputschema See docs for more information}\n\t */\n\tschema(inputSchema, utils) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\t// @ts-expect-error\n\t\t\tinputSchemaFn:\n\t\t\t\tinputSchema[Symbol.toStringTag] === \"AsyncFunction\"\n\t\t\t\t\t? async () => {\n\t\t\t\t\t\t\tconst prevSchema = await this.#inputSchemaFn?.();\n\t\t\t\t\t\t\treturn inputSchema(prevSchema);\n\t\t\t\t\t\t}\n\t\t\t\t\t: async () => inputSchema,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: utils?.handleValidationErrorsShape ?? this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the bind args input validation schema for the action.\n\t * @param bindArgsSchemas Bind args input validation schemas\n\t * @param utils Optional utils object\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#bindargsschemas See docs for more information}\n\t */\n\tbindArgsSchemas(bindArgsSchemas, utils) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape:\n\t\t\t\tutils?.handleBindArgsValidationErrorsShape ?? this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the output data validation schema for the action.\n\t * @param schema Output data validation schema\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/create-the-client#outputschema See docs for more information}\n\t */\n\toutputSchema(dataSchema) {\n\t\treturn new _SafeActionClient({\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: dataSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tctxType: {},\n\t\t\tdefaultValidationErrorsShape: this.#defaultValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t});\n\t}\n\t/**\n\t * Define the action.\n\t * @param serverCodeFn Code that will be executed on the **server side**\n\t * @param [cb] Optional callbacks that will be called after action execution, on the server.\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t */\n\taction(serverCodeFn, utils) {\n\t\treturn actionBuilder({\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\tctxType: this.#ctxType,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t}).action(serverCodeFn, utils);\n\t}\n\t/**\n\t * Define the stateful action.\n\t * To be used with the [`useStateAction`](https://next-safe-action.dev/docs/execute-actions/hooks/usestateaction) hook.\n\t * @param serverCodeFn Code that will be executed on the **server side**\n\t * @param [cb] Optional callbacks that will be called after action execution, on the server.\n\t *\n\t * {@link https://next-safe-action.dev/docs/define-actions/instance-methods#action--stateaction See docs for more information}\n\t */\n\tstateAction(serverCodeFn, utils) {\n\t\treturn actionBuilder({\n\t\t\thandleServerError: this.#handleServerError,\n\t\t\tmiddlewareFns: this.#middlewareFns,\n\t\t\tctxType: this.#ctxType,\n\t\t\tmetadataSchema: this.#metadataSchema,\n\t\t\tmetadata: this.#metadata,\n\t\t\tinputSchemaFn: this.#inputSchemaFn,\n\t\t\tbindArgsSchemas: this.#bindArgsSchemas,\n\t\t\toutputSchema: this.#outputSchema,\n\t\t\tvalidationAdapter: this.#validationAdapter,\n\t\t\thandleValidationErrorsShape: this.#handleValidationErrorsShape,\n\t\t\thandleBindArgsValidationErrorsShape: this.#handleBindArgsValidationErrorsShape,\n\t\t\tthrowValidationErrors: this.#throwValidationErrors,\n\t\t}).stateAction(serverCodeFn, utils);\n\t}\n};\n\n// src/middleware.ts\nvar createMiddleware = () => {\n\treturn {\n\t\tdefine: (middlewareFn) => middlewareFn,\n\t};\n};\n\n// src/index.ts\nvar createSafeActionClient = (createOpts) => {\n\tconst handleServerError =\n\t\tcreateOpts?.handleServerError ||\n\t\t((e) => {\n\t\t\tconsole.error(\"Action error:\", e.message);\n\t\t\treturn DEFAULT_SERVER_ERROR_MESSAGE;\n\t\t});\n\treturn new SafeActionClient({\n\t\tmiddlewareFns: [async ({ next }) => next({ ctx: {} })],\n\t\thandleServerError,\n\t\tinputSchemaFn: void 0,\n\t\tbindArgsSchemas: [],\n\t\toutputSchema: void 0,\n\t\tvalidationAdapter: createOpts?.validationAdapter ?? zodAdapter(),\n\t\t// use zod adapter by default\n\t\tctxType: {},\n\t\tmetadataSchema: createOpts?.defineMetadataSchema?.() ?? void 0,\n\t\tmetadata: void 0,\n\t\tdefaultValidationErrorsShape: createOpts?.defaultValidationErrorsShape ?? \"formatted\",\n\t\tthrowValidationErrors: Boolean(createOpts?.throwValidationErrors),\n\t\thandleValidationErrorsShape: async (ve) =>\n\t\t\tcreateOpts?.defaultValidationErrorsShape === \"flattened\"\n\t\t\t\t? flattenValidationErrors(ve)\n\t\t\t\t: formatValidationErrors(ve),\n\t\thandleBindArgsValidationErrorsShape: async (ve) =>\n\t\t\tcreateOpts?.defaultValidationErrorsShape === \"flattened\"\n\t\t\t\t? flattenBindArgsValidationErrors(ve)\n\t\t\t\t: formatBindArgsValidationErrors(ve),\n\t});\n};\n\n//# sourceMappingURL=index.mjs.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFjdGlvbi1icm93c2VyKS8uL25vZGVfbW9kdWxlcy8ucG5wbS9uZXh0LXNhZmUtYWN0aW9uQDcuMTAuNF9uZXh0QDE1LjIuMV9AYmFiZWwrY29yZUA3LjI0LjVfQG9wZW50ZWxlbWV0cnkrYXBpQDEuOS4wX3JlYWN0LWRfMTExYTJhMDBiNzkxMTViNTA5YTkzZmFmZDNjMzFlMmIvbm9kZV9tb2R1bGVzL25leHQtc2FmZS1hY3Rpb24vZGlzdC9pbmRleC5tanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MsZUFBZSxRQUFRLGVBQWU7QUFDNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxnQ0FBZ0M7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxjQUFjO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixpQ0FBaUM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1EO0FBQ25EO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsMEJBQTBCO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQSxnREFBZ0Q7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLHFCQUFxQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlFQUFpRTtBQUNqRTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixXQUFXO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnRUFBZ0U7QUFDaEU7QUFDQTtBQUNBLFVBQVU7QUFDVixTQUFTO0FBQ1QsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0EsK0VBQStFO0FBQy9FLHdCQUF3Qix5QkFBeUI7QUFDakQ7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsNkJBQTZCLGlCQUFpQjtBQUM5QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSwyQkFBMkIsTUFBTSxZQUFZLFNBQVM7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQWFFO0FBQ0YiLCJzb3VyY2VzIjpbIi9Vc2Vycy9nb21vbGVtb2tnYXRpdHNvZS9wcm9qZWN0cy9lbWFpbC1wcmV2aWV3ZXItYXBwbGljYXRpb24vbm9kZV9tb2R1bGVzLy5wbnBtL25leHQtc2FmZS1hY3Rpb25ANy4xMC40X25leHRAMTUuMi4xX0BiYWJlbCtjb3JlQDcuMjQuNV9Ab3BlbnRlbGVtZXRyeSthcGlAMS45LjBfcmVhY3QtZF8xMTFhMmEwMGI3OTExNWI1MDlhOTNmYWZkM2MzMWUyYi9ub2RlX21vZHVsZXMvbmV4dC1zYWZlLWFjdGlvbi9kaXN0L2luZGV4Lm1qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBzcmMvYWRhcHRlcnMvem9kLnRzXG52YXIgWm9kQWRhcHRlciA9IGNsYXNzIHtcblx0YXN5bmMgdmFsaWRhdGUoc2NoZW1hLCBkYXRhKSB7XG5cdFx0Y29uc3QgcmVzdWx0ID0gYXdhaXQgc2NoZW1hLnNhZmVQYXJzZUFzeW5jKGRhdGEpO1xuXHRcdGlmIChyZXN1bHQuc3VjY2Vzcykge1xuXHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0ZGF0YTogcmVzdWx0LmRhdGEsXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRyZXR1cm4ge1xuXHRcdFx0c3VjY2VzczogZmFsc2UsXG5cdFx0XHRpc3N1ZXM6IHJlc3VsdC5lcnJvci5pc3N1ZXMubWFwKCh7IG1lc3NhZ2UsIHBhdGggfSkgPT4gKHsgbWVzc2FnZSwgcGF0aCB9KSksXG5cdFx0fTtcblx0fVxufTtcbmZ1bmN0aW9uIHpvZEFkYXB0ZXIoKSB7XG5cdHJldHVybiBuZXcgWm9kQWRhcHRlcigpO1xufVxuXG4vLyAuLi8uLi9ub2RlX21vZHVsZXMvLnBucG0vZGVlcG1lcmdlLXRzQDcuMS40L25vZGVfbW9kdWxlcy9kZWVwbWVyZ2UtdHMvZGlzdC9pbmRleC5tanNcbnZhciBhY3Rpb25zID0ge1xuXHRkZWZhdWx0TWVyZ2U6IFN5bWJvbChcImRlZXBtZXJnZS10czogZGVmYXVsdCBtZXJnZVwiKSxcblx0c2tpcDogU3ltYm9sKFwiZGVlcG1lcmdlLXRzOiBza2lwXCIpLFxufTtcbnZhciBhY3Rpb25zSW50byA9IHtcblx0ZGVmYXVsdE1lcmdlOiBhY3Rpb25zLmRlZmF1bHRNZXJnZSxcbn07XG5mdW5jdGlvbiBkZWZhdWx0TWV0YURhdGFVcGRhdGVyKHByZXZpb3VzTWV0YSwgbWV0YU1ldGEpIHtcblx0cmV0dXJuIG1ldGFNZXRhO1xufVxuZnVuY3Rpb24gZGVmYXVsdEZpbHRlclZhbHVlcyh2YWx1ZXMsIG1ldGEpIHtcblx0cmV0dXJuIHZhbHVlcy5maWx0ZXIoKHZhbHVlKSA9PiB2YWx1ZSAhPT0gdm9pZCAwKTtcbn1cbnZhciBPYmplY3RUeXBlO1xuKGZ1bmN0aW9uIChPYmplY3RUeXBlMikge1xuXHRPYmplY3RUeXBlMlsoT2JqZWN0VHlwZTJbXCJOT1RcIl0gPSAwKV0gPSBcIk5PVFwiO1xuXHRPYmplY3RUeXBlMlsoT2JqZWN0VHlwZTJbXCJSRUNPUkRcIl0gPSAxKV0gPSBcIlJFQ09SRFwiO1xuXHRPYmplY3RUeXBlMlsoT2JqZWN0VHlwZTJbXCJBUlJBWVwiXSA9IDIpXSA9IFwiQVJSQVlcIjtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiU0VUXCJdID0gMyldID0gXCJTRVRcIjtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiTUFQXCJdID0gNCldID0gXCJNQVBcIjtcblx0T2JqZWN0VHlwZTJbKE9iamVjdFR5cGUyW1wiT1RIRVJcIl0gPSA1KV0gPSBcIk9USEVSXCI7XG59KShPYmplY3RUeXBlIHx8IChPYmplY3RUeXBlID0ge30pKTtcbmZ1bmN0aW9uIGdldE9iamVjdFR5cGUob2JqZWN0KSB7XG5cdGlmICh0eXBlb2Ygb2JqZWN0ICE9PSBcIm9iamVjdFwiIHx8IG9iamVjdCA9PT0gbnVsbCkge1xuXHRcdHJldHVybiAwO1xuXHR9XG5cdGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcblx0XHRyZXR1cm4gMjtcblx0fVxuXHRpZiAoaXNSZWNvcmQob2JqZWN0KSkge1xuXHRcdHJldHVybiAxO1xuXHR9XG5cdGlmIChvYmplY3QgaW5zdGFuY2VvZiBTZXQpIHtcblx0XHRyZXR1cm4gMztcblx0fVxuXHRpZiAob2JqZWN0IGluc3RhbmNlb2YgTWFwKSB7XG5cdFx0cmV0dXJuIDQ7XG5cdH1cblx0cmV0dXJuIDU7XG59XG5mdW5jdGlvbiBnZXRLZXlzKG9iamVjdHMpIHtcblx0Y29uc3Qga2V5cyA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgU2V0KCk7XG5cdGZvciAoY29uc3Qgb2JqZWN0IG9mIG9iamVjdHMpIHtcblx0XHRmb3IgKGNvbnN0IGtleSBvZiBbLi4uT2JqZWN0LmtleXMob2JqZWN0KSwgLi4uT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhvYmplY3QpXSkge1xuXHRcdFx0a2V5cy5hZGQoa2V5KTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIGtleXM7XG59XG5mdW5jdGlvbiBvYmplY3RIYXNQcm9wZXJ0eShvYmplY3QsIHByb3BlcnR5KSB7XG5cdHJldHVybiB0eXBlb2Ygb2JqZWN0ID09PSBcIm9iamVjdFwiICYmIE9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChvYmplY3QsIHByb3BlcnR5KTtcbn1cbmZ1bmN0aW9uIGdldEl0ZXJhYmxlT2ZJdGVyYWJsZXMoaXRlcmFibGVzKSB7XG5cdGxldCBtX2l0ZXJhYmxlc0luZGV4ID0gMDtcblx0bGV0IG1faXRlcmF0b3IgPSBpdGVyYWJsZXNbMF0/LltTeW1ib2wuaXRlcmF0b3JdKCk7XG5cdHJldHVybiB7XG5cdFx0W1N5bWJvbC5pdGVyYXRvcl0oKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHRuZXh0KCkge1xuXHRcdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRcdGlmIChtX2l0ZXJhdG9yID09PSB2b2lkIDApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHZvaWQgMCB9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0Y29uc3QgcmVzdWx0ID0gbV9pdGVyYXRvci5uZXh0KCk7XG5cdFx0XHRcdFx0XHRpZiAocmVzdWx0LmRvbmUgPT09IHRydWUpIHtcblx0XHRcdFx0XHRcdFx0bV9pdGVyYWJsZXNJbmRleCArPSAxO1xuXHRcdFx0XHRcdFx0XHRtX2l0ZXJhdG9yID0gaXRlcmFibGVzW21faXRlcmFibGVzSW5kZXhdPy5bU3ltYm9sLml0ZXJhdG9yXSgpO1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdGRvbmU6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHR2YWx1ZTogcmVzdWx0LnZhbHVlLFxuXHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHR9IHdoaWxlICh0cnVlKTtcblx0XHRcdFx0fSxcblx0XHRcdH07XG5cdFx0fSxcblx0fTtcbn1cbnZhciB2YWxpZFJlY29yZFRvU3RyaW5nVmFsdWVzID0gW1wiW29iamVjdCBPYmplY3RdXCIsIFwiW29iamVjdCBNb2R1bGVdXCJdO1xuZnVuY3Rpb24gaXNSZWNvcmQodmFsdWUpIHtcblx0aWYgKCF2YWxpZFJlY29yZFRvU3RyaW5nVmFsdWVzLmluY2x1ZGVzKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWx1ZSkpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNvbnN0IHsgY29uc3RydWN0b3IgfSA9IHZhbHVlO1xuXHRpZiAoY29uc3RydWN0b3IgPT09IHZvaWQgMCkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cdGNvbnN0IHByb3RvdHlwZSA9IGNvbnN0cnVjdG9yLnByb3RvdHlwZTtcblx0aWYgKFxuXHRcdHByb3RvdHlwZSA9PT0gbnVsbCB8fFxuXHRcdHR5cGVvZiBwcm90b3R5cGUgIT09IFwib2JqZWN0XCIgfHxcblx0XHQhdmFsaWRSZWNvcmRUb1N0cmluZ1ZhbHVlcy5pbmNsdWRlcyhPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwocHJvdG90eXBlKSlcblx0KSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGlmICghcHJvdG90eXBlLmhhc093blByb3BlcnR5KFwiaXNQcm90b3R5cGVPZlwiKSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRyZXR1cm4gdHJ1ZTtcbn1cbmZ1bmN0aW9uIG1lcmdlUmVjb3JkcyQxKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0ge307XG5cdGZvciAoY29uc3Qga2V5IG9mIGdldEtleXModmFsdWVzKSkge1xuXHRcdGNvbnN0IHByb3BWYWx1ZXMgPSBbXTtcblx0XHRmb3IgKGNvbnN0IHZhbHVlIG9mIHZhbHVlcykge1xuXHRcdFx0aWYgKG9iamVjdEhhc1Byb3BlcnR5KHZhbHVlLCBrZXkpKSB7XG5cdFx0XHRcdHByb3BWYWx1ZXMucHVzaCh2YWx1ZVtrZXldKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHByb3BWYWx1ZXMubGVuZ3RoID09PSAwKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0Y29uc3QgdXBkYXRlZE1ldGEgPSB1dGlscy5tZXRhRGF0YVVwZGF0ZXIobWV0YSwge1xuXHRcdFx0a2V5LFxuXHRcdFx0cGFyZW50czogdmFsdWVzLFxuXHRcdH0pO1xuXHRcdGNvbnN0IHByb3BlcnR5UmVzdWx0ID0gbWVyZ2VVbmtub3ducyhwcm9wVmFsdWVzLCB1dGlscywgdXBkYXRlZE1ldGEpO1xuXHRcdGlmIChwcm9wZXJ0eVJlc3VsdCA9PT0gYWN0aW9ucy5za2lwKSB7XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0aWYgKGtleSA9PT0gXCJfX3Byb3RvX19cIikge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHJlc3VsdCwga2V5LCB7XG5cdFx0XHRcdHZhbHVlOiBwcm9wZXJ0eVJlc3VsdCxcblx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXN1bHRba2V5XSA9IHByb3BlcnR5UmVzdWx0O1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWVyZ2VBcnJheXMkMSh2YWx1ZXMpIHtcblx0cmV0dXJuIHZhbHVlcy5mbGF0KCk7XG59XG5mdW5jdGlvbiBtZXJnZVNldHMkMSh2YWx1ZXMpIHtcblx0cmV0dXJuIG5ldyBTZXQoZ2V0SXRlcmFibGVPZkl0ZXJhYmxlcyh2YWx1ZXMpKTtcbn1cbmZ1bmN0aW9uIG1lcmdlTWFwcyQxKHZhbHVlcykge1xuXHRyZXR1cm4gbmV3IE1hcChnZXRJdGVyYWJsZU9mSXRlcmFibGVzKHZhbHVlcykpO1xufVxuZnVuY3Rpb24gbWVyZ2VPdGhlcnMkMSh2YWx1ZXMpIHtcblx0cmV0dXJuIHZhbHVlcy5hdCgtMSk7XG59XG52YXIgbWVyZ2VGdW5jdGlvbnMgPSB7XG5cdG1lcmdlUmVjb3JkczogbWVyZ2VSZWNvcmRzJDEsXG5cdG1lcmdlQXJyYXlzOiBtZXJnZUFycmF5cyQxLFxuXHRtZXJnZVNldHM6IG1lcmdlU2V0cyQxLFxuXHRtZXJnZU1hcHM6IG1lcmdlTWFwcyQxLFxuXHRtZXJnZU90aGVyczogbWVyZ2VPdGhlcnMkMSxcbn07XG5mdW5jdGlvbiBkZWVwbWVyZ2UoLi4ub2JqZWN0cykge1xuXHRyZXR1cm4gZGVlcG1lcmdlQ3VzdG9tKHt9KSguLi5vYmplY3RzKTtcbn1cbmZ1bmN0aW9uIGRlZXBtZXJnZUN1c3RvbShvcHRpb25zLCByb290TWV0YURhdGEpIHtcblx0Y29uc3QgdXRpbHMgPSBnZXRVdGlscyhvcHRpb25zLCBjdXN0b21pemVkRGVlcG1lcmdlKTtcblx0ZnVuY3Rpb24gY3VzdG9taXplZERlZXBtZXJnZSguLi5vYmplY3RzKSB7XG5cdFx0cmV0dXJuIG1lcmdlVW5rbm93bnMob2JqZWN0cywgdXRpbHMsIHJvb3RNZXRhRGF0YSk7XG5cdH1cblx0cmV0dXJuIGN1c3RvbWl6ZWREZWVwbWVyZ2U7XG59XG5mdW5jdGlvbiBnZXRVdGlscyhvcHRpb25zLCBjdXN0b21pemVkRGVlcG1lcmdlKSB7XG5cdHJldHVybiB7XG5cdFx0ZGVmYXVsdE1lcmdlRnVuY3Rpb25zOiBtZXJnZUZ1bmN0aW9ucyxcblx0XHRtZXJnZUZ1bmN0aW9uczoge1xuXHRcdFx0Li4ubWVyZ2VGdW5jdGlvbnMsXG5cdFx0XHQuLi5PYmplY3QuZnJvbUVudHJpZXMoXG5cdFx0XHRcdE9iamVjdC5lbnRyaWVzKG9wdGlvbnMpXG5cdFx0XHRcdFx0LmZpbHRlcigoW2tleSwgb3B0aW9uXSkgPT4gT2JqZWN0Lmhhc093bihtZXJnZUZ1bmN0aW9ucywga2V5KSlcblx0XHRcdFx0XHQubWFwKChba2V5LCBvcHRpb25dKSA9PiAob3B0aW9uID09PSBmYWxzZSA/IFtrZXksIG1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzXSA6IFtrZXksIG9wdGlvbl0pKVxuXHRcdFx0KSxcblx0XHR9LFxuXHRcdG1ldGFEYXRhVXBkYXRlcjogb3B0aW9ucy5tZXRhRGF0YVVwZGF0ZXIgPz8gZGVmYXVsdE1ldGFEYXRhVXBkYXRlcixcblx0XHRkZWVwbWVyZ2U6IGN1c3RvbWl6ZWREZWVwbWVyZ2UsXG5cdFx0dXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZzogb3B0aW9ucy5lbmFibGVJbXBsaWNpdERlZmF1bHRNZXJnaW5nID8/IGZhbHNlLFxuXHRcdGZpbHRlclZhbHVlczogb3B0aW9ucy5maWx0ZXJWYWx1ZXMgPT09IGZhbHNlID8gdm9pZCAwIDogKG9wdGlvbnMuZmlsdGVyVmFsdWVzID8/IGRlZmF1bHRGaWx0ZXJWYWx1ZXMpLFxuXHRcdGFjdGlvbnMsXG5cdH07XG59XG5mdW5jdGlvbiBtZXJnZVVua25vd25zKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgZmlsdGVyZWRWYWx1ZXMgPSB1dGlscy5maWx0ZXJWYWx1ZXM/Lih2YWx1ZXMsIG1ldGEpID8/IHZhbHVlcztcblx0aWYgKGZpbHRlcmVkVmFsdWVzLmxlbmd0aCA9PT0gMCkge1xuXHRcdHJldHVybiB2b2lkIDA7XG5cdH1cblx0aWYgKGZpbHRlcmVkVmFsdWVzLmxlbmd0aCA9PT0gMSkge1xuXHRcdHJldHVybiBtZXJnZU90aGVycyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHR9XG5cdGNvbnN0IHR5cGUgPSBnZXRPYmplY3RUeXBlKGZpbHRlcmVkVmFsdWVzWzBdKTtcblx0aWYgKHR5cGUgIT09IDAgJiYgdHlwZSAhPT0gNSkge1xuXHRcdGZvciAobGV0IG1faW5kZXggPSAxOyBtX2luZGV4IDwgZmlsdGVyZWRWYWx1ZXMubGVuZ3RoOyBtX2luZGV4KyspIHtcblx0XHRcdGlmIChnZXRPYmplY3RUeXBlKGZpbHRlcmVkVmFsdWVzW21faW5kZXhdKSA9PT0gdHlwZSkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtZXJnZU90aGVycyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRcdH1cblx0fVxuXHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRjYXNlIDE6IHtcblx0XHRcdHJldHVybiBtZXJnZVJlY29yZHMoZmlsdGVyZWRWYWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0XHR9XG5cdFx0Y2FzZSAyOiB7XG5cdFx0XHRyZXR1cm4gbWVyZ2VBcnJheXMoZmlsdGVyZWRWYWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0XHR9XG5cdFx0Y2FzZSAzOiB7XG5cdFx0XHRyZXR1cm4gbWVyZ2VTZXRzKGZpbHRlcmVkVmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdFx0fVxuXHRcdGNhc2UgNDoge1xuXHRcdFx0cmV0dXJuIG1lcmdlTWFwcyhmaWx0ZXJlZFZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRcdH1cblx0XHRkZWZhdWx0OiB7XG5cdFx0XHRyZXR1cm4gbWVyZ2VPdGhlcnMoZmlsdGVyZWRWYWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0XHR9XG5cdH1cbn1cbmZ1bmN0aW9uIG1lcmdlUmVjb3Jkcyh2YWx1ZXMsIHV0aWxzLCBtZXRhKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3Jkcyh2YWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0aWYgKFxuXHRcdHJlc3VsdCA9PT0gYWN0aW9ucy5kZWZhdWx0TWVyZ2UgfHxcblx0XHQodXRpbHMudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyAmJlxuXHRcdFx0cmVzdWx0ID09PSB2b2lkIDAgJiZcblx0XHRcdHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3JkcyAhPT0gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlUmVjb3Jkcylcblx0KSB7XG5cdFx0cmV0dXJuIHV0aWxzLmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZVJlY29yZHModmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1lcmdlQXJyYXlzKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0gdXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VBcnJheXModmFsdWVzLCB1dGlscywgbWV0YSk7XG5cdGlmIChcblx0XHRyZXN1bHQgPT09IGFjdGlvbnMuZGVmYXVsdE1lcmdlIHx8XG5cdFx0KHV0aWxzLnVzZUltcGxpY2l0RGVmYXVsdE1lcmdpbmcgJiZcblx0XHRcdHJlc3VsdCA9PT0gdm9pZCAwICYmXG5cdFx0XHR1dGlscy5tZXJnZUZ1bmN0aW9ucy5tZXJnZUFycmF5cyAhPT0gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzKVxuXHQpIHtcblx0XHRyZXR1cm4gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlQXJyYXlzKHZhbHVlcyk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdDtcbn1cbmZ1bmN0aW9uIG1lcmdlU2V0cyh2YWx1ZXMsIHV0aWxzLCBtZXRhKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cyh2YWx1ZXMsIHV0aWxzLCBtZXRhKTtcblx0aWYgKFxuXHRcdHJlc3VsdCA9PT0gYWN0aW9ucy5kZWZhdWx0TWVyZ2UgfHxcblx0XHQodXRpbHMudXNlSW1wbGljaXREZWZhdWx0TWVyZ2luZyAmJlxuXHRcdFx0cmVzdWx0ID09PSB2b2lkIDAgJiZcblx0XHRcdHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cyAhPT0gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlU2V0cylcblx0KSB7XG5cdFx0cmV0dXJuIHV0aWxzLmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZVNldHModmFsdWVzKTtcblx0fVxuXHRyZXR1cm4gcmVzdWx0O1xufVxuZnVuY3Rpb24gbWVyZ2VNYXBzKHZhbHVlcywgdXRpbHMsIG1ldGEpIHtcblx0Y29uc3QgcmVzdWx0ID0gdXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzKHZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRpZiAoXG5cdFx0cmVzdWx0ID09PSBhY3Rpb25zLmRlZmF1bHRNZXJnZSB8fFxuXHRcdCh1dGlscy51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nICYmXG5cdFx0XHRyZXN1bHQgPT09IHZvaWQgMCAmJlxuXHRcdFx0dXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzICE9PSB1dGlscy5kZWZhdWx0TWVyZ2VGdW5jdGlvbnMubWVyZ2VNYXBzKVxuXHQpIHtcblx0XHRyZXR1cm4gdXRpbHMuZGVmYXVsdE1lcmdlRnVuY3Rpb25zLm1lcmdlTWFwcyh2YWx1ZXMpO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5mdW5jdGlvbiBtZXJnZU90aGVycyh2YWx1ZXMsIHV0aWxzLCBtZXRhKSB7XG5cdGNvbnN0IHJlc3VsdCA9IHV0aWxzLm1lcmdlRnVuY3Rpb25zLm1lcmdlT3RoZXJzKHZhbHVlcywgdXRpbHMsIG1ldGEpO1xuXHRpZiAoXG5cdFx0cmVzdWx0ID09PSBhY3Rpb25zLmRlZmF1bHRNZXJnZSB8fFxuXHRcdCh1dGlscy51c2VJbXBsaWNpdERlZmF1bHRNZXJnaW5nICYmXG5cdFx0XHRyZXN1bHQgPT09IHZvaWQgMCAmJlxuXHRcdFx0dXRpbHMubWVyZ2VGdW5jdGlvbnMubWVyZ2VPdGhlcnMgIT09IHV0aWxzLmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycylcblx0KSB7XG5cdFx0cmV0dXJuIHV0aWxzLmRlZmF1bHRNZXJnZUZ1bmN0aW9ucy5tZXJnZU90aGVycyh2YWx1ZXMpO1xuXHR9XG5cdHJldHVybiByZXN1bHQ7XG59XG5cbi8vIHNyYy9uZXh0L2Vycm9ycy9iYWlsb3V0LXRvLWNzci50c1xudmFyIEJBSUxPVVRfVE9fQ1NSID0gXCJCQUlMT1VUX1RPX0NMSUVOVF9TSURFX1JFTkRFUklOR1wiO1xuZnVuY3Rpb24gaXNCYWlsb3V0VG9DU1JFcnJvcihlcnIpIHtcblx0aWYgKHR5cGVvZiBlcnIgIT09IFwib2JqZWN0XCIgfHwgZXJyID09PSBudWxsIHx8ICEoXCJkaWdlc3RcIiBpbiBlcnIpKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdHJldHVybiBlcnIuZGlnZXN0ID09PSBCQUlMT1VUX1RPX0NTUjtcbn1cblxuLy8gc3JjL25leHQvZXJyb3JzL2h0dHAtYWNjZXNzLWZhbGxiYWNrLnRzXG52YXIgSFRUUEFjY2Vzc0Vycm9yU3RhdHVzID0ge1xuXHROT1RfRk9VTkQ6IDQwNCxcblx0Rk9SQklEREVOOiA0MDMsXG5cdFVOQVVUSE9SSVpFRDogNDAxLFxufTtcbnZhciBBTExPV0VEX0NPREVTID0gbmV3IFNldChPYmplY3QudmFsdWVzKEhUVFBBY2Nlc3NFcnJvclN0YXR1cykpO1xudmFyIEhUVFBfRVJST1JfRkFMTEJBQ0tfRVJST1JfQ09ERSA9IFwiTkVYVF9IVFRQX0VSUk9SX0ZBTExCQUNLXCI7XG5mdW5jdGlvbiBpc0hUVFBBY2Nlc3NGYWxsYmFja0Vycm9yKGVycm9yKSB7XG5cdGlmICh0eXBlb2YgZXJyb3IgIT09IFwib2JqZWN0XCIgfHwgZXJyb3IgPT09IG51bGwgfHwgIShcImRpZ2VzdFwiIGluIGVycm9yKSB8fCB0eXBlb2YgZXJyb3IuZGlnZXN0ICE9PSBcInN0cmluZ1wiKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cdGNvbnN0IFtwcmVmaXgsIGh0dHBTdGF0dXNdID0gZXJyb3IuZGlnZXN0LnNwbGl0KFwiO1wiKTtcblx0cmV0dXJuIHByZWZpeCA9PT0gSFRUUF9FUlJPUl9GQUxMQkFDS19FUlJPUl9DT0RFICYmIEFMTE9XRURfQ09ERVMuaGFzKE51bWJlcihodHRwU3RhdHVzKSk7XG59XG5mdW5jdGlvbiBnZXRBY2Nlc3NGYWxsYmFja0hUVFBTdGF0dXMoZXJyb3IpIHtcblx0Y29uc3QgaHR0cFN0YXR1cyA9IGVycm9yLmRpZ2VzdC5zcGxpdChcIjtcIilbMV07XG5cdHJldHVybiBOdW1iZXIoaHR0cFN0YXR1cyk7XG59XG5cbi8vIHNyYy9uZXh0L2Vycm9ycy9yZWRpcmVjdC50c1xudmFyIFJlZGlyZWN0U3RhdHVzQ29kZSA9IC8qIEBfX1BVUkVfXyAqLyAoKFJlZGlyZWN0U3RhdHVzQ29kZTIpID0+IHtcblx0UmVkaXJlY3RTdGF0dXNDb2RlMlsoUmVkaXJlY3RTdGF0dXNDb2RlMltcIlNlZU90aGVyXCJdID0gMzAzKV0gPSBcIlNlZU90aGVyXCI7XG5cdFJlZGlyZWN0U3RhdHVzQ29kZTJbKFJlZGlyZWN0U3RhdHVzQ29kZTJbXCJUZW1wb3JhcnlSZWRpcmVjdFwiXSA9IDMwNyldID0gXCJUZW1wb3JhcnlSZWRpcmVjdFwiO1xuXHRSZWRpcmVjdFN0YXR1c0NvZGUyWyhSZWRpcmVjdFN0YXR1c0NvZGUyW1wiUGVybWFuZW50UmVkaXJlY3RcIl0gPSAzMDgpXSA9IFwiUGVybWFuZW50UmVkaXJlY3RcIjtcblx0cmV0dXJuIFJlZGlyZWN0U3RhdHVzQ29kZTI7XG59KShSZWRpcmVjdFN0YXR1c0NvZGUgfHwge30pO1xudmFyIFJFRElSRUNUX0VSUk9SX0NPREUgPSBcIk5FWFRfUkVESVJFQ1RcIjtcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFcnJvcihlcnJvcikge1xuXHRpZiAodHlwZW9mIGVycm9yICE9PSBcIm9iamVjdFwiIHx8IGVycm9yID09PSBudWxsIHx8ICEoXCJkaWdlc3RcIiBpbiBlcnJvcikgfHwgdHlwZW9mIGVycm9yLmRpZ2VzdCAhPT0gXCJzdHJpbmdcIikge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXHRjb25zdCBkaWdlc3QgPSBlcnJvci5kaWdlc3Quc3BsaXQoXCI7XCIpO1xuXHRjb25zdCBbZXJyb3JDb2RlLCB0eXBlXSA9IGRpZ2VzdDtcblx0Y29uc3QgZGVzdGluYXRpb24gPSBkaWdlc3Quc2xpY2UoMiwgLTIpLmpvaW4oXCI7XCIpO1xuXHRjb25zdCBzdGF0dXMgPSBkaWdlc3QuYXQoLTIpO1xuXHRjb25zdCBzdGF0dXNDb2RlID0gTnVtYmVyKHN0YXR1cyk7XG5cdHJldHVybiAoXG5cdFx0ZXJyb3JDb2RlID09PSBSRURJUkVDVF9FUlJPUl9DT0RFICYmXG5cdFx0KHR5cGUgPT09IFwicmVwbGFjZVwiIHx8IHR5cGUgPT09IFwicHVzaFwiKSAmJlxuXHRcdHR5cGVvZiBkZXN0aW5hdGlvbiA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdCFpc05hTihzdGF0dXNDb2RlKSAmJlxuXHRcdHN0YXR1c0NvZGUgaW4gUmVkaXJlY3RTdGF0dXNDb2RlXG5cdCk7XG59XG5cbi8vIHNyYy9uZXh0L2Vycm9ycy9yb3V0ZXIudHNcbmZ1bmN0aW9uIGlzTmV4dFJvdXRlckVycm9yKGVycm9yKSB7XG5cdHJldHVybiBpc1JlZGlyZWN0RXJyb3IoZXJyb3IpIHx8IGlzSFRUUEFjY2Vzc0ZhbGxiYWNrRXJyb3IoZXJyb3IpO1xufVxuXG4vLyBzcmMvbmV4dC9lcnJvcnMvZHluYW1pYy11c2FnZS50c1xudmFyIERZTkFNSUNfRVJST1JfQ09ERSA9IFwiRFlOQU1JQ19TRVJWRVJfVVNBR0VcIjtcbmZ1bmN0aW9uIGlzRHluYW1pY1NlcnZlckVycm9yKGVycikge1xuXHRpZiAodHlwZW9mIGVyciAhPT0gXCJvYmplY3RcIiB8fCBlcnIgPT09IG51bGwgfHwgIShcImRpZ2VzdFwiIGluIGVycikgfHwgdHlwZW9mIGVyci5kaWdlc3QgIT09IFwic3RyaW5nXCIpIHtcblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblx0cmV0dXJuIGVyci5kaWdlc3QgPT09IERZTkFNSUNfRVJST1JfQ09ERTtcbn1cbmZ1bmN0aW9uIGlzRHluYW1pY1Bvc3Rwb25lUmVhc29uKHJlYXNvbikge1xuXHRyZXR1cm4gKFxuXHRcdHJlYXNvbi5pbmNsdWRlcyhcIm5lZWRzIHRvIGJhaWwgb3V0IG9mIHByZXJlbmRlcmluZyBhdCB0aGlzIHBvaW50IGJlY2F1c2UgaXQgdXNlZFwiKSAmJlxuXHRcdHJlYXNvbi5pbmNsdWRlcyhcIkxlYXJuIG1vcmU6IGh0dHBzOi8vbmV4dGpzLm9yZy9kb2NzL21lc3NhZ2VzL3Bwci1jYXVnaHQtZXJyb3JcIilcblx0KTtcbn1cbmZ1bmN0aW9uIGlzRHluYW1pY1Bvc3Rwb25lKGVycikge1xuXHRpZiAoXG5cdFx0dHlwZW9mIGVyciA9PT0gXCJvYmplY3RcIiAmJlxuXHRcdGVyciAhPT0gbnVsbCAmJiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblx0XHR0eXBlb2YgZXJyLm1lc3NhZ2UgPT09IFwic3RyaW5nXCJcblx0KSB7XG5cdFx0cmV0dXJuIGlzRHluYW1pY1Bvc3Rwb25lUmVhc29uKGVyci5tZXNzYWdlKTtcblx0fVxuXHRyZXR1cm4gZmFsc2U7XG59XG52YXIgaXNEeW5hbWljVXNhZ2VFcnJvciA9IChlcnIpID0+XG5cdGlzRHluYW1pY1NlcnZlckVycm9yKGVycikgfHwgaXNCYWlsb3V0VG9DU1JFcnJvcihlcnIpIHx8IGlzTmV4dFJvdXRlckVycm9yKGVycikgfHwgaXNEeW5hbWljUG9zdHBvbmUoZXJyKTtcblxuLy8gc3JjL25leHQvZXJyb3JzL3Bvc3Rwb25lLnRzXG52YXIgUkVBQ1RfUE9TVFBPTkVfVFlQRSA9IFN5bWJvbC5mb3IoXCJyZWFjdC5wb3N0cG9uZVwiKTtcbmZ1bmN0aW9uIGlzUG9zdHBvbmUoZXJyb3IpIHtcblx0cmV0dXJuIChcblx0XHR0eXBlb2YgZXJyb3IgPT09IFwib2JqZWN0XCIgJiZcblx0XHRlcnJvciAhPT0gbnVsbCAmJiAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcblx0XHRlcnJvci4kJHR5cGVvZiA9PT0gUkVBQ1RfUE9TVFBPTkVfVFlQRVxuXHQpO1xufVxuXG4vLyBzcmMvbmV4dC9lcnJvcnMvaW5kZXgudHNcbnZhciBGcmFtZXdvcmtFcnJvckhhbmRsZXIgPSBjbGFzcyBfRnJhbWV3b3JrRXJyb3JIYW5kbGVyIHtcblx0I2ZyYW1ld29ya0Vycm9yO1xuXHRzdGF0aWMgaXNGcmFtZXdvcmtFcnJvcihlcnJvcikge1xuXHRcdHJldHVybiBpc05leHRSb3V0ZXJFcnJvcihlcnJvcikgfHwgaXNCYWlsb3V0VG9DU1JFcnJvcihlcnJvcikgfHwgaXNEeW5hbWljVXNhZ2VFcnJvcihlcnJvcikgfHwgaXNQb3N0cG9uZShlcnJvcik7XG5cdH1cblx0aGFuZGxlRXJyb3IoZSkge1xuXHRcdGlmIChfRnJhbWV3b3JrRXJyb3JIYW5kbGVyLmlzRnJhbWV3b3JrRXJyb3IoZSkpIHtcblx0XHRcdHRoaXMuI2ZyYW1ld29ya0Vycm9yID0gZTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0dGhyb3cgZTtcblx0fVxuXHRnZXQgZXJyb3IoKSB7XG5cdFx0cmV0dXJuIHRoaXMuI2ZyYW1ld29ya0Vycm9yO1xuXHR9XG5cdGdldCBpc1JlZGlyZWN0RXJyb3IoKSB7XG5cdFx0cmV0dXJuIGlzUmVkaXJlY3RFcnJvcih0aGlzLiNmcmFtZXdvcmtFcnJvcik7XG5cdH1cblx0Z2V0IGlzTm90Rm91bmRFcnJvcigpIHtcblx0XHRyZXR1cm4gaXNIVFRQQWNjZXNzRmFsbGJhY2tFcnJvcih0aGlzLiNmcmFtZXdvcmtFcnJvcikgJiYgZ2V0QWNjZXNzRmFsbGJhY2tIVFRQU3RhdHVzKHRoaXMuI2ZyYW1ld29ya0Vycm9yKSA9PT0gNDA0O1xuXHR9XG5cdGdldCBpc0ZvcmJpZGRlbkVycm9yKCkge1xuXHRcdHJldHVybiBpc0hUVFBBY2Nlc3NGYWxsYmFja0Vycm9yKHRoaXMuI2ZyYW1ld29ya0Vycm9yKSAmJiBnZXRBY2Nlc3NGYWxsYmFja0hUVFBTdGF0dXModGhpcy4jZnJhbWV3b3JrRXJyb3IpID09PSA0MDM7XG5cdH1cblx0Z2V0IGlzVW5hdXRob3JpemVkRXJyb3IoKSB7XG5cdFx0cmV0dXJuIGlzSFRUUEFjY2Vzc0ZhbGxiYWNrRXJyb3IodGhpcy4jZnJhbWV3b3JrRXJyb3IpICYmIGdldEFjY2Vzc0ZhbGxiYWNrSFRUUFN0YXR1cyh0aGlzLiNmcmFtZXdvcmtFcnJvcikgPT09IDQwMTtcblx0fVxufTtcblxuLy8gc3JjL3V0aWxzLnRzXG52YXIgREVGQVVMVF9TRVJWRVJfRVJST1JfTUVTU0FHRSA9IFwiU29tZXRoaW5nIHdlbnQgd3Jvbmcgd2hpbGUgZXhlY3V0aW5nIHRoZSBvcGVyYXRpb24uXCI7XG52YXIgaXNFcnJvciA9IChlcnJvcikgPT4gZXJyb3IgaW5zdGFuY2VvZiBFcnJvcjtcbnZhciB3aW5uaW5nQm9vbGVhbiA9ICguLi5hcmdzKSA9PiB7XG5cdHJldHVybiBhcmdzLnJlZHVjZSgoYWNjLCB2KSA9PiAodHlwZW9mIHYgPT09IFwiYm9vbGVhblwiID8gdiA6IGFjYyksIGZhbHNlKTtcbn07XG5cbi8vIHNyYy92YWxpZGF0aW9uLWVycm9ycy50c1xudmFyIGJ1aWxkVmFsaWRhdGlvbkVycm9ycyA9IChpc3N1ZXMpID0+IHtcblx0Y29uc3QgdmUgPSB7fTtcblx0Zm9yIChjb25zdCBpc3N1ZSBvZiBpc3N1ZXMpIHtcblx0XHRjb25zdCB7IHBhdGgsIG1lc3NhZ2UgfSA9IGlzc3VlO1xuXHRcdGlmICghcGF0aCB8fCBwYXRoLmxlbmd0aCA9PT0gMCkge1xuXHRcdFx0dmUuX2Vycm9ycyA9IHZlLl9lcnJvcnMgPyBbLi4udmUuX2Vycm9ycywgbWVzc2FnZV0gOiBbbWVzc2FnZV07XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cdFx0bGV0IHJlZiA9IHZlO1xuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgcGF0aC5sZW5ndGggLSAxOyBpKyspIHtcblx0XHRcdGNvbnN0IGsgPSBwYXRoW2ldO1xuXHRcdFx0aWYgKCFyZWZba10pIHtcblx0XHRcdFx0cmVmW2tdID0ge307XG5cdFx0XHR9XG5cdFx0XHRyZWYgPSByZWZba107XG5cdFx0fVxuXHRcdGNvbnN0IGtleSA9IHBhdGhbcGF0aC5sZW5ndGggLSAxXTtcblx0XHRyZWZba2V5XSA9IHJlZltrZXldPy5fZXJyb3JzXG5cdFx0XHQ/IHtcblx0XHRcdFx0XHQuLi5zdHJ1Y3R1cmVkQ2xvbmUocmVmW2tleV0pLFxuXHRcdFx0XHRcdF9lcnJvcnM6IFsuLi5yZWZba2V5XS5fZXJyb3JzLCBtZXNzYWdlXSxcblx0XHRcdFx0fVxuXHRcdFx0OiB7IC4uLnN0cnVjdHVyZWRDbG9uZShyZWZba2V5XSksIF9lcnJvcnM6IFttZXNzYWdlXSB9O1xuXHR9XG5cdHJldHVybiB2ZTtcbn07XG52YXIgQWN0aW9uU2VydmVyVmFsaWRhdGlvbkVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdHZhbGlkYXRpb25FcnJvcnM7XG5cdGNvbnN0cnVjdG9yKHZhbGlkYXRpb25FcnJvcnMpIHtcblx0XHRzdXBlcihcIlNlcnZlciBBY3Rpb24gc2VydmVyIHZhbGlkYXRpb24gZXJyb3Iocykgb2NjdXJyZWRcIik7XG5cdFx0dGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcblx0fVxufTtcbnZhciBBY3Rpb25WYWxpZGF0aW9uRXJyb3IgPSBjbGFzcyBleHRlbmRzIEVycm9yIHtcblx0dmFsaWRhdGlvbkVycm9ycztcblx0Y29uc3RydWN0b3IodmFsaWRhdGlvbkVycm9ycykge1xuXHRcdHN1cGVyKFwiU2VydmVyIEFjdGlvbiB2YWxpZGF0aW9uIGVycm9yKHMpIG9jY3VycmVkXCIpO1xuXHRcdHRoaXMudmFsaWRhdGlvbkVycm9ycyA9IHZhbGlkYXRpb25FcnJvcnM7XG5cdH1cbn07XG5mdW5jdGlvbiByZXR1cm5WYWxpZGF0aW9uRXJyb3JzKHNjaGVtYSwgdmFsaWRhdGlvbkVycm9ycykge1xuXHR0aHJvdyBuZXcgQWN0aW9uU2VydmVyVmFsaWRhdGlvbkVycm9yKHZhbGlkYXRpb25FcnJvcnMpO1xufVxuZnVuY3Rpb24gZm9ybWF0VmFsaWRhdGlvbkVycm9ycyh2YWxpZGF0aW9uRXJyb3JzKSB7XG5cdHJldHVybiB2YWxpZGF0aW9uRXJyb3JzO1xufVxuZnVuY3Rpb24gZm9ybWF0QmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzKGJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycykge1xuXHRyZXR1cm4gYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzO1xufVxuZnVuY3Rpb24gZmxhdHRlblZhbGlkYXRpb25FcnJvcnModmFsaWRhdGlvbkVycm9ycykge1xuXHRjb25zdCBmbGF0dGVuZWQgPSB7XG5cdFx0Zm9ybUVycm9yczogW10sXG5cdFx0ZmllbGRFcnJvcnM6IHt9LFxuXHR9O1xuXHRmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyh2YWxpZGF0aW9uRXJyb3JzID8/IHt9KSkge1xuXHRcdGlmIChrZXkgPT09IFwiX2Vycm9yc1wiICYmIEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRmbGF0dGVuZWQuZm9ybUVycm9ycyA9IFsuLi52YWx1ZV07XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChcIl9lcnJvcnNcIiBpbiB2YWx1ZSkge1xuXHRcdFx0XHRmbGF0dGVuZWQuZmllbGRFcnJvcnNba2V5XSA9IFsuLi52YWx1ZS5fZXJyb3JzXTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0cmV0dXJuIGZsYXR0ZW5lZDtcbn1cbmZ1bmN0aW9uIGZsYXR0ZW5CaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMoYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzKSB7XG5cdHJldHVybiBiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMubWFwKCh2ZSkgPT4gZmxhdHRlblZhbGlkYXRpb25FcnJvcnModmUpKTtcbn1cbnZhciBBY3Rpb25NZXRhZGF0YVZhbGlkYXRpb25FcnJvciA9IGNsYXNzIGV4dGVuZHMgRXJyb3Ige1xuXHR2YWxpZGF0aW9uRXJyb3JzO1xuXHRjb25zdHJ1Y3Rvcih2YWxpZGF0aW9uRXJyb3JzKSB7XG5cdFx0c3VwZXIoXCJJbnZhbGlkIG1ldGFkYXRhIGlucHV0LiBQbGVhc2UgYmUgc3VyZSB0byBwYXNzIG1ldGFkYXRhIHZpYSBgbWV0YWRhdGFgIG1ldGhvZCBiZWZvcmUgZGVmaW5pbmcgdGhlIGFjdGlvbi5cIik7XG5cdFx0dGhpcy5uYW1lID0gXCJBY3Rpb25NZXRhZGF0YUVycm9yXCI7XG5cdFx0dGhpcy52YWxpZGF0aW9uRXJyb3JzID0gdmFsaWRhdGlvbkVycm9ycztcblx0fVxufTtcbnZhciBBY3Rpb25PdXRwdXREYXRhVmFsaWRhdGlvbkVycm9yID0gY2xhc3MgZXh0ZW5kcyBFcnJvciB7XG5cdHZhbGlkYXRpb25FcnJvcnM7XG5cdGNvbnN0cnVjdG9yKHZhbGlkYXRpb25FcnJvcnMpIHtcblx0XHRzdXBlcihcblx0XHRcdFwiSW52YWxpZCBhY3Rpb24gZGF0YSAob3V0cHV0KS4gUGxlYXNlIGJlIHN1cmUgdG8gcmV0dXJuIGRhdGEgZm9sbG93aW5nIHRoZSBzaGFwZSBvZiB0aGUgc2NoZW1hIHBhc3NlZCB0byBgZGF0YVNjaGVtYWAgbWV0aG9kLlwiXG5cdFx0KTtcblx0XHR0aGlzLm5hbWUgPSBcIkFjdGlvbk91dHB1dERhdGFFcnJvclwiO1xuXHRcdHRoaXMudmFsaWRhdGlvbkVycm9ycyA9IHZhbGlkYXRpb25FcnJvcnM7XG5cdH1cbn07XG5cbi8vIHNyYy9hY3Rpb24tYnVpbGRlci50c1xuZnVuY3Rpb24gYWN0aW9uQnVpbGRlcihhcmdzKSB7XG5cdGNvbnN0IGJpbmRBcmdzU2NoZW1hcyA9IGFyZ3MuYmluZEFyZ3NTY2hlbWFzID8/IFtdO1xuXHRmdW5jdGlvbiBidWlsZEFjdGlvbih7IHdpdGhTdGF0ZSB9KSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdGFjdGlvbjogKHNlcnZlckNvZGVGbiwgdXRpbHMpID0+IHtcblx0XHRcdFx0cmV0dXJuIGFzeW5jICguLi5jbGllbnRJbnB1dHMpID0+IHtcblx0XHRcdFx0XHRsZXQgY3VycmVudEN0eCA9IHt9O1xuXHRcdFx0XHRcdGNvbnN0IG1pZGRsZXdhcmVSZXN1bHQgPSB7IHN1Y2Nlc3M6IGZhbHNlIH07XG5cdFx0XHRcdFx0bGV0IHByZXZSZXN1bHQgPSB2b2lkIDA7XG5cdFx0XHRcdFx0Y29uc3QgcGFyc2VkSW5wdXREYXRhcyA9IFtdO1xuXHRcdFx0XHRcdGNvbnN0IGZyYW1ld29ya0Vycm9ySGFuZGxlciA9IG5ldyBGcmFtZXdvcmtFcnJvckhhbmRsZXIoKTtcblx0XHRcdFx0XHRpZiAod2l0aFN0YXRlKSB7XG5cdFx0XHRcdFx0XHRwcmV2UmVzdWx0ID0gY2xpZW50SW5wdXRzLnNwbGljZShiaW5kQXJnc1NjaGVtYXMubGVuZ3RoLCAxKVswXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggKyAxID4gY2xpZW50SW5wdXRzLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Y2xpZW50SW5wdXRzLnB1c2godm9pZCAwKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0Y29uc3QgZXhlY3V0ZU1pZGRsZXdhcmVTdGFjayA9IGFzeW5jIChpZHggPSAwKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGNvbnN0IG1pZGRsZXdhcmVGbiA9IGFyZ3MubWlkZGxld2FyZUZuc1tpZHhdO1xuXHRcdFx0XHRcdFx0bWlkZGxld2FyZVJlc3VsdC5jdHggPSBjdXJyZW50Q3R4O1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0aWYgKGlkeCA9PT0gMCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChhcmdzLm1ldGFkYXRhU2NoZW1hKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJzZWRNZCA9IGF3YWl0IGFyZ3MudmFsaWRhdGlvbkFkYXB0ZXIudmFsaWRhdGUoYXJncy5tZXRhZGF0YVNjaGVtYSwgYXJncy5tZXRhZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXBhcnNlZE1kLnN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IEFjdGlvbk1ldGFkYXRhVmFsaWRhdGlvbkVycm9yKGJ1aWxkVmFsaWRhdGlvbkVycm9ycyhwYXJzZWRNZC5pc3N1ZXMpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0aWYgKG1pZGRsZXdhcmVGbikge1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IG1pZGRsZXdhcmVGbih7XG5cdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHBhc3MgcmF3IGNsaWVudCBpbnB1dFxuXHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0XHRcdG5leHQ6IGFzeW5jIChuZXh0T3B0cykgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50Q3R4ID0gZGVlcG1lcmdlKGN1cnJlbnRDdHgsIG5leHRPcHRzPy5jdHggPz8ge30pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCBleGVjdXRlTWlkZGxld2FyZVN0YWNrKGlkeCArIDEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gbWlkZGxld2FyZVJlc3VsdDtcblx0XHRcdFx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRcdFx0fSkuY2F0Y2goKGUpID0+IGZyYW1ld29ya0Vycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlKSk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgcGFyc2VkSW5wdXRzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dHMubWFwKGFzeW5jIChpbnB1dCwgaSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoaSA9PT0gY2xpZW50SW5wdXRzLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGFyZ3MuaW5wdXRTY2hlbWFGbiA9PT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3VjY2VzczogdHJ1ZSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YTogdm9pZCAwLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGFyZ3MudmFsaWRhdGlvbkFkYXB0ZXIudmFsaWRhdGUoYXdhaXQgYXJncy5pbnB1dFNjaGVtYUZuKCksIGlucHV0KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gYXJncy52YWxpZGF0aW9uQWRhcHRlci52YWxpZGF0ZShiaW5kQXJnc1NjaGVtYXNbaV0sIGlucHV0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHRsZXQgaGFzQmluZFZhbGlkYXRpb25FcnJvcnMgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMgPSBBcnJheShwYXJzZWRJbnB1dHMubGVuZ3RoIC0gMSkuZmlsbCh7fSk7XG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBwYXJzZWRJbnB1dHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBhcnNlZElucHV0ID0gcGFyc2VkSW5wdXRzW2ldO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHBhcnNlZElucHV0LnN1Y2Nlc3MpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VkSW5wdXREYXRhcy5wdXNoKHBhcnNlZElucHV0LmRhdGEpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKGkgPCBwYXJzZWRJbnB1dHMubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1tpXSA9IGJ1aWxkVmFsaWRhdGlvbkVycm9ycyhwYXJzZWRJbnB1dC5pc3N1ZXMpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGhhc0JpbmRWYWxpZGF0aW9uRXJyb3JzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb25zdCB2YWxpZGF0aW9uRXJyb3JzID0gYnVpbGRWYWxpZGF0aW9uRXJyb3JzKHBhcnNlZElucHV0Lmlzc3Vlcyk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWlkZGxld2FyZVJlc3VsdC52YWxpZGF0aW9uRXJyb3JzID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncy5oYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUodmFsaWRhdGlvbkVycm9ycywge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGhhc0JpbmRWYWxpZGF0aW9uRXJyb3JzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyA9IGF3YWl0IFByb21pc2UucmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncy5oYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZShiaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnMsIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAobWlkZGxld2FyZVJlc3VsdC52YWxpZGF0aW9uRXJyb3JzIHx8IG1pZGRsZXdhcmVSZXN1bHQuYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjZkFyZ3MgPSBbXTtcblx0XHRcdFx0XHRcdFx0XHRzY2ZBcmdzWzBdID0ge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGFyc2VkSW5wdXQ6IHBhcnNlZElucHV0RGF0YXMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NQYXJzZWRJbnB1dHM6IHBhcnNlZElucHV0RGF0YXMuc2xpY2UoMCwgLTEpLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xpZW50SW5wdXQ6IGNsaWVudElucHV0cy5hdCgtMSksXG5cdFx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHdpdGhTdGF0ZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2NmQXJnc1sxXSA9IHsgcHJldlJlc3VsdDogc3RydWN0dXJlZENsb25lKHByZXZSZXN1bHQpIH07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGRhdGEgPSBhd2FpdCBzZXJ2ZXJDb2RlRm4oLi4uc2NmQXJncykuY2F0Y2goKGUpID0+IGZyYW1ld29ya0Vycm9ySGFuZGxlci5oYW5kbGVFcnJvcihlKSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBhcmdzLm91dHB1dFNjaGVtYSAhPT0gXCJ1bmRlZmluZWRcIiAmJiAhZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmVycm9yKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBwYXJzZWREYXRhID0gYXdhaXQgYXJncy52YWxpZGF0aW9uQWRhcHRlci52YWxpZGF0ZShhcmdzLm91dHB1dFNjaGVtYSwgZGF0YSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIXBhcnNlZERhdGEuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgQWN0aW9uT3V0cHV0RGF0YVZhbGlkYXRpb25FcnJvcihidWlsZFZhbGlkYXRpb25FcnJvcnMocGFyc2VkRGF0YS5pc3N1ZXMpKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0bWlkZGxld2FyZVJlc3VsdC5zdWNjZXNzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LmRhdGEgPSBkYXRhO1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQucGFyc2VkSW5wdXQgPSBwYXJzZWRJbnB1dERhdGFzLmF0KC0xKTtcblx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LmJpbmRBcmdzUGFyc2VkSW5wdXRzID0gcGFyc2VkSW5wdXREYXRhcy5zbGljZSgwLCAtMSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdFx0XHRcdFx0aWYgKGUgaW5zdGFuY2VvZiBBY3Rpb25TZXJ2ZXJWYWxpZGF0aW9uRXJyb3IpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCB2ZSA9IGUudmFsaWRhdGlvbkVycm9ycztcblx0XHRcdFx0XHRcdFx0XHRtaWRkbGV3YXJlUmVzdWx0LnZhbGlkYXRpb25FcnJvcnMgPSBhd2FpdCBQcm9taXNlLnJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0XHRhcmdzLmhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSh2ZSwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc3QgZXJyb3IgPSBpc0Vycm9yKGUpID8gZSA6IG5ldyBFcnJvcihERUZBVUxUX1NFUlZFUl9FUlJPUl9NRVNTQUdFKTtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCByZXR1cm5lZEVycm9yID0gYXdhaXQgUHJvbWlzZS5yZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdFx0YXJncy5oYW5kbGVTZXJ2ZXJFcnJvcihlcnJvciwge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gcGFzcyByYXcgY2xpZW50IGlucHV0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdHg6IGN1cnJlbnRDdHgsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdG1pZGRsZXdhcmVSZXN1bHQuc2VydmVyRXJyb3IgPSByZXR1cm5lZEVycm9yO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRhd2FpdCBleGVjdXRlTWlkZGxld2FyZVN0YWNrKCk7XG5cdFx0XHRcdFx0Y29uc3QgY2FsbGJhY2tQcm9taXNlcyA9IFtdO1xuXHRcdFx0XHRcdGlmIChmcmFtZXdvcmtFcnJvckhhbmRsZXIuZXJyb3IpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrUHJvbWlzZXMucHVzaChcblx0XHRcdFx0XHRcdFx0dXRpbHM/Lm9uU3VjY2Vzcz8uKHtcblx0XHRcdFx0XHRcdFx0XHRkYXRhOiB2b2lkIDAsXG5cdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdHBhcnNlZElucHV0OiBwYXJzZWRJbnB1dERhdGFzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc1BhcnNlZElucHV0czogcGFyc2VkSW5wdXREYXRhcy5zbGljZSgwLCAtMSksXG5cdFx0XHRcdFx0XHRcdFx0aGFzUmVkaXJlY3RlZDogZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmlzUmVkaXJlY3RFcnJvcixcblx0XHRcdFx0XHRcdFx0XHRoYXNOb3RGb3VuZDogZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmlzTm90Rm91bmRFcnJvcixcblx0XHRcdFx0XHRcdFx0XHRoYXNGb3JiaWRkZW46IGZyYW1ld29ya0Vycm9ySGFuZGxlci5pc0ZvcmJpZGRlbkVycm9yLFxuXHRcdFx0XHRcdFx0XHRcdGhhc1VuYXV0aG9yaXplZDogZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmlzVW5hdXRob3JpemVkRXJyb3IsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2tQcm9taXNlcy5wdXNoKFxuXHRcdFx0XHRcdFx0XHR1dGlscz8ub25TZXR0bGVkPy4oe1xuXHRcdFx0XHRcdFx0XHRcdG1ldGFkYXRhOiBhcmdzLm1ldGFkYXRhLFxuXHRcdFx0XHRcdFx0XHRcdGN0eDogY3VycmVudEN0eCxcblx0XHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc0NsaWVudElucHV0czogYmluZEFyZ3NTY2hlbWFzLmxlbmd0aCA/IGNsaWVudElucHV0cy5zbGljZSgwLCAtMSkgOiBbXSxcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHQ6IHt9LFxuXHRcdFx0XHRcdFx0XHRcdGhhc1JlZGlyZWN0ZWQ6IGZyYW1ld29ya0Vycm9ySGFuZGxlci5pc1JlZGlyZWN0RXJyb3IsXG5cdFx0XHRcdFx0XHRcdFx0aGFzTm90Rm91bmQ6IGZyYW1ld29ya0Vycm9ySGFuZGxlci5pc05vdEZvdW5kRXJyb3IsXG5cdFx0XHRcdFx0XHRcdFx0aGFzRm9yYmlkZGVuOiBmcmFtZXdvcmtFcnJvckhhbmRsZXIuaXNGb3JiaWRkZW5FcnJvcixcblx0XHRcdFx0XHRcdFx0XHRoYXNVbmF1dGhvcml6ZWQ6IGZyYW1ld29ya0Vycm9ySGFuZGxlci5pc1VuYXV0aG9yaXplZEVycm9yLFxuXHRcdFx0XHRcdFx0XHR9KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrUHJvbWlzZXMpO1xuXHRcdFx0XHRcdFx0dGhyb3cgZnJhbWV3b3JrRXJyb3JIYW5kbGVyLmVycm9yO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zdCBhY3Rpb25SZXN1bHQgPSB7fTtcblx0XHRcdFx0XHRpZiAodHlwZW9mIG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0aWYgKHdpbm5pbmdCb29sZWFuKGFyZ3MudGhyb3dWYWxpZGF0aW9uRXJyb3JzLCB1dGlscz8udGhyb3dWYWxpZGF0aW9uRXJyb3JzKSkge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBuZXcgQWN0aW9uVmFsaWRhdGlvbkVycm9yKG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycyk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRhY3Rpb25SZXN1bHQudmFsaWRhdGlvbkVycm9ycyA9IG1pZGRsZXdhcmVSZXN1bHQudmFsaWRhdGlvbkVycm9ycztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKHR5cGVvZiBtaWRkbGV3YXJlUmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyAhPT0gXCJ1bmRlZmluZWRcIikge1xuXHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LmJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyA9IG1pZGRsZXdhcmVSZXN1bHQuYmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAodHlwZW9mIG1pZGRsZXdhcmVSZXN1bHQuc2VydmVyRXJyb3IgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdGlmICh1dGlscz8udGhyb3dTZXJ2ZXJFcnJvcikge1xuXHRcdFx0XHRcdFx0XHR0aHJvdyBtaWRkbGV3YXJlUmVzdWx0LnNlcnZlckVycm9yO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LnNlcnZlckVycm9yID0gbWlkZGxld2FyZVJlc3VsdC5zZXJ2ZXJFcnJvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKG1pZGRsZXdhcmVSZXN1bHQuc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBtaWRkbGV3YXJlUmVzdWx0LmRhdGEgIT09IFwidW5kZWZpbmVkXCIpIHtcblx0XHRcdFx0XHRcdFx0YWN0aW9uUmVzdWx0LmRhdGEgPSBtaWRkbGV3YXJlUmVzdWx0LmRhdGE7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRjYWxsYmFja1Byb21pc2VzLnB1c2goXG5cdFx0XHRcdFx0XHRcdHV0aWxzPy5vblN1Y2Nlc3M/Lih7XG5cdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdGRhdGE6IGFjdGlvblJlc3VsdC5kYXRhLFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdHBhcnNlZElucHV0OiBwYXJzZWRJbnB1dERhdGFzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0XHRiaW5kQXJnc1BhcnNlZElucHV0czogcGFyc2VkSW5wdXREYXRhcy5zbGljZSgwLCAtMSksXG5cdFx0XHRcdFx0XHRcdFx0aGFzUmVkaXJlY3RlZDogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0aGFzTm90Rm91bmQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRcdGhhc0ZvcmJpZGRlbjogZmFsc2UsXG5cdFx0XHRcdFx0XHRcdFx0aGFzVW5hdXRob3JpemVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrUHJvbWlzZXMucHVzaChcblx0XHRcdFx0XHRcdFx0dXRpbHM/Lm9uRXJyb3I/Lih7XG5cdFx0XHRcdFx0XHRcdFx0bWV0YWRhdGE6IGFyZ3MubWV0YWRhdGEsXG5cdFx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRcdGNsaWVudElucHV0OiBjbGllbnRJbnB1dHMuYXQoLTEpLFxuXHRcdFx0XHRcdFx0XHRcdGJpbmRBcmdzQ2xpZW50SW5wdXRzOiBiaW5kQXJnc1NjaGVtYXMubGVuZ3RoID8gY2xpZW50SW5wdXRzLnNsaWNlKDAsIC0xKSA6IFtdLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBhY3Rpb25SZXN1bHQsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjYWxsYmFja1Byb21pc2VzLnB1c2goXG5cdFx0XHRcdFx0XHR1dGlscz8ub25TZXR0bGVkPy4oe1xuXHRcdFx0XHRcdFx0XHRtZXRhZGF0YTogYXJncy5tZXRhZGF0YSxcblx0XHRcdFx0XHRcdFx0Y3R4OiBjdXJyZW50Q3R4LFxuXHRcdFx0XHRcdFx0XHRjbGllbnRJbnB1dDogY2xpZW50SW5wdXRzLmF0KC0xKSxcblx0XHRcdFx0XHRcdFx0YmluZEFyZ3NDbGllbnRJbnB1dHM6IGJpbmRBcmdzU2NoZW1hcy5sZW5ndGggPyBjbGllbnRJbnB1dHMuc2xpY2UoMCwgLTEpIDogW10sXG5cdFx0XHRcdFx0XHRcdHJlc3VsdDogYWN0aW9uUmVzdWx0LFxuXHRcdFx0XHRcdFx0XHRoYXNSZWRpcmVjdGVkOiBmYWxzZSxcblx0XHRcdFx0XHRcdFx0aGFzTm90Rm91bmQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRoYXNGb3JiaWRkZW46IGZhbHNlLFxuXHRcdFx0XHRcdFx0XHRoYXNVbmF1dGhvcml6ZWQ6IGZhbHNlLFxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKGNhbGxiYWNrUHJvbWlzZXMpO1xuXHRcdFx0XHRcdHJldHVybiBhY3Rpb25SZXN1bHQ7XG5cdFx0XHRcdH07XG5cdFx0XHR9LFxuXHRcdH07XG5cdH1cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBEZWZpbmUgdGhlIGFjdGlvbi5cblx0XHQgKiBAcGFyYW0gc2VydmVyQ29kZUZuIENvZGUgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIG9uIHRoZSAqKnNlcnZlciBzaWRlKipcblx0XHQgKlxuXHRcdCAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZGVmaW5lLWFjdGlvbnMvaW5zdGFuY2UtbWV0aG9kcyNhY3Rpb24tLXN0YXRlYWN0aW9uIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHRcdCAqL1xuXHRcdGFjdGlvbjogYnVpbGRBY3Rpb24oeyB3aXRoU3RhdGU6IGZhbHNlIH0pLmFjdGlvbixcblx0XHQvKipcblx0XHQgKiBEZWZpbmUgdGhlIHN0YXRlZnVsIGFjdGlvbi4gVG8gYmUgdXNlZCB3aXRoIHRoZSBbYHVzZVN0YXRlQWN0aW9uYF0oaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2V4ZWN1dGUtYWN0aW9ucy9ob29rcy91c2VzdGF0ZWFjdGlvbikgaG9vay5cblx0XHQgKiBAcGFyYW0gc2VydmVyQ29kZUZuIENvZGUgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIG9uIHRoZSAqKnNlcnZlciBzaWRlKipcblx0XHQgKlxuXHRcdCAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZGVmaW5lLWFjdGlvbnMvaW5zdGFuY2UtbWV0aG9kcyNhY3Rpb24tLXN0YXRlYWN0aW9uIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHRcdCAqL1xuXHRcdHN0YXRlQWN0aW9uOiBidWlsZEFjdGlvbih7IHdpdGhTdGF0ZTogdHJ1ZSB9KS5hY3Rpb24sXG5cdH07XG59XG5cbi8vIHNyYy9zYWZlLWFjdGlvbi1jbGllbnQudHNcbnZhciBTYWZlQWN0aW9uQ2xpZW50ID0gY2xhc3MgX1NhZmVBY3Rpb25DbGllbnQge1xuXHQjaGFuZGxlU2VydmVyRXJyb3I7XG5cdCNtaWRkbGV3YXJlRm5zO1xuXHQjbWV0YWRhdGFTY2hlbWE7XG5cdCNtZXRhZGF0YTtcblx0I2lucHV0U2NoZW1hRm47XG5cdCNvdXRwdXRTY2hlbWE7XG5cdCNjdHhUeXBlO1xuXHQjYmluZEFyZ3NTY2hlbWFzO1xuXHQjdmFsaWRhdGlvbkFkYXB0ZXI7XG5cdCNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU7XG5cdCNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTtcblx0I2RlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGU7XG5cdCN0aHJvd1ZhbGlkYXRpb25FcnJvcnM7XG5cdGNvbnN0cnVjdG9yKG9wdHMpIHtcblx0XHR0aGlzLiNtaWRkbGV3YXJlRm5zID0gb3B0cy5taWRkbGV3YXJlRm5zO1xuXHRcdHRoaXMuI2hhbmRsZVNlcnZlckVycm9yID0gb3B0cy5oYW5kbGVTZXJ2ZXJFcnJvcjtcblx0XHR0aGlzLiNtZXRhZGF0YVNjaGVtYSA9IG9wdHMubWV0YWRhdGFTY2hlbWE7XG5cdFx0dGhpcy4jbWV0YWRhdGEgPSBvcHRzLm1ldGFkYXRhO1xuXHRcdHRoaXMuI2lucHV0U2NoZW1hRm4gPSBvcHRzLmlucHV0U2NoZW1hRm4gPz8gdm9pZCAwO1xuXHRcdHRoaXMuI291dHB1dFNjaGVtYSA9IG9wdHMub3V0cHV0U2NoZW1hO1xuXHRcdHRoaXMuI2JpbmRBcmdzU2NoZW1hcyA9IG9wdHMuYmluZEFyZ3NTY2hlbWFzID8/IFtdO1xuXHRcdHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyID0gb3B0cy52YWxpZGF0aW9uQWRhcHRlcjtcblx0XHR0aGlzLiNjdHhUeXBlID0gb3B0cy5jdHhUeXBlO1xuXHRcdHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSA9IG9wdHMuaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlO1xuXHRcdHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlID0gb3B0cy5oYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTtcblx0XHR0aGlzLiNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlID0gb3B0cy5kZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlO1xuXHRcdHRoaXMuI3Rocm93VmFsaWRhdGlvbkVycm9ycyA9IG9wdHMudGhyb3dWYWxpZGF0aW9uRXJyb3JzO1xuXHR9XG5cdC8qKlxuXHQgKiBVc2UgYSBtaWRkbGV3YXJlIGZ1bmN0aW9uLlxuXHQgKiBAcGFyYW0gbWlkZGxld2FyZUZuIE1pZGRsZXdhcmUgZnVuY3Rpb25cblx0ICpcblx0ICoge0BsaW5rIGh0dHBzOi8vbmV4dC1zYWZlLWFjdGlvbi5kZXYvZG9jcy9kZWZpbmUtYWN0aW9ucy9pbnN0YW5jZS1tZXRob2RzI3VzZSBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0ICovXG5cdHVzZShtaWRkbGV3YXJlRm4pIHtcblx0XHRyZXR1cm4gbmV3IF9TYWZlQWN0aW9uQ2xpZW50KHtcblx0XHRcdG1pZGRsZXdhcmVGbnM6IFsuLi50aGlzLiNtaWRkbGV3YXJlRm5zLCBtaWRkbGV3YXJlRm5dLFxuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdG91dHB1dFNjaGVtYTogdGhpcy4jb3V0cHV0U2NoZW1hLFxuXHRcdFx0YmluZEFyZ3NTY2hlbWFzOiB0aGlzLiNiaW5kQXJnc1NjaGVtYXMsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGN0eFR5cGU6IHt9LFxuXHRcdFx0ZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdHRocm93VmFsaWRhdGlvbkVycm9yczogdGhpcy4jdGhyb3dWYWxpZGF0aW9uRXJyb3JzLFxuXHRcdH0pO1xuXHR9XG5cdC8qKlxuXHQgKiBEZWZpbmUgbWV0YWRhdGEgZm9yIHRoZSBhY3Rpb24uXG5cdCAqIEBwYXJhbSBkYXRhIE1ldGFkYXRhIHdpdGggdGhlIHNhbWUgdHlwZSBhcyB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBbYGRlZmluZU1ldGFkYXRhU2NoZW1hYF0oaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2NyZWF0ZS10aGUtY2xpZW50I2RlZmluZW1ldGFkYXRhc2NoZW1hKSBvcHRpb25hbCBpbml0aWFsaXphdGlvbiBmdW5jdGlvblxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjbWV0YWRhdGEgU2VlIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb259XG5cdCAqL1xuXHRtZXRhZGF0YShkYXRhKSB7XG5cdFx0cmV0dXJuIG5ldyBfU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0XHRtaWRkbGV3YXJlRm5zOiB0aGlzLiNtaWRkbGV3YXJlRm5zLFxuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IGRhdGEsXG5cdFx0XHRpbnB1dFNjaGVtYUZuOiB0aGlzLiNpbnB1dFNjaGVtYUZuLFxuXHRcdFx0YmluZEFyZ3NTY2hlbWFzOiB0aGlzLiNiaW5kQXJnc1NjaGVtYXMsXG5cdFx0XHRvdXRwdXRTY2hlbWE6IHRoaXMuI291dHB1dFNjaGVtYSxcblx0XHRcdHZhbGlkYXRpb25BZGFwdGVyOiB0aGlzLiN2YWxpZGF0aW9uQWRhcHRlcixcblx0XHRcdGhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0aGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0Y3R4VHlwZToge30sXG5cdFx0XHRkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiB0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZSB0aGUgaW5wdXQgdmFsaWRhdGlvbiBzY2hlbWEgZm9yIHRoZSBhY3Rpb24uXG5cdCAqIEBwYXJhbSBpbnB1dFNjaGVtYSBJbnB1dCB2YWxpZGF0aW9uIHNjaGVtYVxuXHQgKiBAcGFyYW0gdXRpbHMgT3B0aW9uYWwgdXRpbHMgb2JqZWN0XG5cdCAqXG5cdCAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZGVmaW5lLWFjdGlvbnMvY3JlYXRlLXRoZS1jbGllbnQjaW5wdXRzY2hlbWEgU2VlIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb259XG5cdCAqL1xuXHRzY2hlbWEoaW5wdXRTY2hlbWEsIHV0aWxzKSB7XG5cdFx0cmV0dXJuIG5ldyBfU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0XHRtaWRkbGV3YXJlRm5zOiB0aGlzLiNtaWRkbGV3YXJlRm5zLFxuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0Ly8gQHRzLWV4cGVjdC1lcnJvclxuXHRcdFx0aW5wdXRTY2hlbWFGbjpcblx0XHRcdFx0aW5wdXRTY2hlbWFbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gXCJBc3luY0Z1bmN0aW9uXCJcblx0XHRcdFx0XHQ/IGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgcHJldlNjaGVtYSA9IGF3YWl0IHRoaXMuI2lucHV0U2NoZW1hRm4/LigpO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaW5wdXRTY2hlbWEocHJldlNjaGVtYSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0OiBhc3luYyAoKSA9PiBpbnB1dFNjaGVtYSxcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiB0aGlzLiNvdXRwdXRTY2hlbWEsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHV0aWxzPy5oYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPz8gdGhpcy4jaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0aGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0Y3R4VHlwZToge30sXG5cdFx0XHRkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNkZWZhdWx0VmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiB0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMsXG5cdFx0fSk7XG5cdH1cblx0LyoqXG5cdCAqIERlZmluZSB0aGUgYmluZCBhcmdzIGlucHV0IHZhbGlkYXRpb24gc2NoZW1hIGZvciB0aGUgYWN0aW9uLlxuXHQgKiBAcGFyYW0gYmluZEFyZ3NTY2hlbWFzIEJpbmQgYXJncyBpbnB1dCB2YWxpZGF0aW9uIHNjaGVtYXNcblx0ICogQHBhcmFtIHV0aWxzIE9wdGlvbmFsIHV0aWxzIG9iamVjdFxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjYmluZGFyZ3NzY2hlbWFzIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHQgKi9cblx0YmluZEFyZ3NTY2hlbWFzKGJpbmRBcmdzU2NoZW1hcywgdXRpbHMpIHtcblx0XHRyZXR1cm4gbmV3IF9TYWZlQWN0aW9uQ2xpZW50KHtcblx0XHRcdG1pZGRsZXdhcmVGbnM6IHRoaXMuI21pZGRsZXdhcmVGbnMsXG5cdFx0XHRoYW5kbGVTZXJ2ZXJFcnJvcjogdGhpcy4jaGFuZGxlU2VydmVyRXJyb3IsXG5cdFx0XHRtZXRhZGF0YVNjaGVtYTogdGhpcy4jbWV0YWRhdGFTY2hlbWEsXG5cdFx0XHRtZXRhZGF0YTogdGhpcy4jbWV0YWRhdGEsXG5cdFx0XHRpbnB1dFNjaGVtYUZuOiB0aGlzLiNpbnB1dFNjaGVtYUZuLFxuXHRcdFx0YmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiB0aGlzLiNvdXRwdXRTY2hlbWEsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOlxuXHRcdFx0XHR1dGlscz8uaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPz8gdGhpcy4jaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRjdHhUeXBlOiB7fSxcblx0XHRcdGRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2RlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHR0aHJvd1ZhbGlkYXRpb25FcnJvcnM6IHRoaXMuI3Rocm93VmFsaWRhdGlvbkVycm9ycyxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogRGVmaW5lIHRoZSBvdXRwdXQgZGF0YSB2YWxpZGF0aW9uIHNjaGVtYSBmb3IgdGhlIGFjdGlvbi5cblx0ICogQHBhcmFtIHNjaGVtYSBPdXRwdXQgZGF0YSB2YWxpZGF0aW9uIHNjaGVtYVxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2NyZWF0ZS10aGUtY2xpZW50I291dHB1dHNjaGVtYSBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0ICovXG5cdG91dHB1dFNjaGVtYShkYXRhU2NoZW1hKSB7XG5cdFx0cmV0dXJuIG5ldyBfU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0XHRtaWRkbGV3YXJlRm5zOiB0aGlzLiNtaWRkbGV3YXJlRm5zLFxuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiBkYXRhU2NoZW1hLFxuXHRcdFx0dmFsaWRhdGlvbkFkYXB0ZXI6IHRoaXMuI3ZhbGlkYXRpb25BZGFwdGVyLFxuXHRcdFx0aGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHRjdHhUeXBlOiB7fSxcblx0XHRcdGRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2RlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUsXG5cdFx0XHR0aHJvd1ZhbGlkYXRpb25FcnJvcnM6IHRoaXMuI3Rocm93VmFsaWRhdGlvbkVycm9ycyxcblx0XHR9KTtcblx0fVxuXHQvKipcblx0ICogRGVmaW5lIHRoZSBhY3Rpb24uXG5cdCAqIEBwYXJhbSBzZXJ2ZXJDb2RlRm4gQ29kZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgb24gdGhlICoqc2VydmVyIHNpZGUqKlxuXHQgKiBAcGFyYW0gW2NiXSBPcHRpb25hbCBjYWxsYmFja3MgdGhhdCB3aWxsIGJlIGNhbGxlZCBhZnRlciBhY3Rpb24gZXhlY3V0aW9uLCBvbiB0aGUgc2VydmVyLlxuXHQgKlxuXHQgKiB7QGxpbmsgaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2RlZmluZS1hY3Rpb25zL2luc3RhbmNlLW1ldGhvZHMjYWN0aW9uLS1zdGF0ZWFjdGlvbiBTZWUgZG9jcyBmb3IgbW9yZSBpbmZvcm1hdGlvbn1cblx0ICovXG5cdGFjdGlvbihzZXJ2ZXJDb2RlRm4sIHV0aWxzKSB7XG5cdFx0cmV0dXJuIGFjdGlvbkJ1aWxkZXIoe1xuXHRcdFx0aGFuZGxlU2VydmVyRXJyb3I6IHRoaXMuI2hhbmRsZVNlcnZlckVycm9yLFxuXHRcdFx0bWlkZGxld2FyZUZuczogdGhpcy4jbWlkZGxld2FyZUZucyxcblx0XHRcdGN0eFR5cGU6IHRoaXMuI2N0eFR5cGUsXG5cdFx0XHRtZXRhZGF0YVNjaGVtYTogdGhpcy4jbWV0YWRhdGFTY2hlbWEsXG5cdFx0XHRtZXRhZGF0YTogdGhpcy4jbWV0YWRhdGEsXG5cdFx0XHRpbnB1dFNjaGVtYUZuOiB0aGlzLiNpbnB1dFNjaGVtYUZuLFxuXHRcdFx0YmluZEFyZ3NTY2hlbWFzOiB0aGlzLiNiaW5kQXJnc1NjaGVtYXMsXG5cdFx0XHRvdXRwdXRTY2hlbWE6IHRoaXMuI291dHB1dFNjaGVtYSxcblx0XHRcdHZhbGlkYXRpb25BZGFwdGVyOiB0aGlzLiN2YWxpZGF0aW9uQWRhcHRlcixcblx0XHRcdGhhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZTogdGhpcy4jaGFuZGxlVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0aGFuZGxlQmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlLFxuXHRcdFx0dGhyb3dWYWxpZGF0aW9uRXJyb3JzOiB0aGlzLiN0aHJvd1ZhbGlkYXRpb25FcnJvcnMsXG5cdFx0fSkuYWN0aW9uKHNlcnZlckNvZGVGbiwgdXRpbHMpO1xuXHR9XG5cdC8qKlxuXHQgKiBEZWZpbmUgdGhlIHN0YXRlZnVsIGFjdGlvbi5cblx0ICogVG8gYmUgdXNlZCB3aXRoIHRoZSBbYHVzZVN0YXRlQWN0aW9uYF0oaHR0cHM6Ly9uZXh0LXNhZmUtYWN0aW9uLmRldi9kb2NzL2V4ZWN1dGUtYWN0aW9ucy9ob29rcy91c2VzdGF0ZWFjdGlvbikgaG9vay5cblx0ICogQHBhcmFtIHNlcnZlckNvZGVGbiBDb2RlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCBvbiB0aGUgKipzZXJ2ZXIgc2lkZSoqXG5cdCAqIEBwYXJhbSBbY2JdIE9wdGlvbmFsIGNhbGxiYWNrcyB0aGF0IHdpbGwgYmUgY2FsbGVkIGFmdGVyIGFjdGlvbiBleGVjdXRpb24sIG9uIHRoZSBzZXJ2ZXIuXG5cdCAqXG5cdCAqIHtAbGluayBodHRwczovL25leHQtc2FmZS1hY3Rpb24uZGV2L2RvY3MvZGVmaW5lLWFjdGlvbnMvaW5zdGFuY2UtbWV0aG9kcyNhY3Rpb24tLXN0YXRlYWN0aW9uIFNlZSBkb2NzIGZvciBtb3JlIGluZm9ybWF0aW9ufVxuXHQgKi9cblx0c3RhdGVBY3Rpb24oc2VydmVyQ29kZUZuLCB1dGlscykge1xuXHRcdHJldHVybiBhY3Rpb25CdWlsZGVyKHtcblx0XHRcdGhhbmRsZVNlcnZlckVycm9yOiB0aGlzLiNoYW5kbGVTZXJ2ZXJFcnJvcixcblx0XHRcdG1pZGRsZXdhcmVGbnM6IHRoaXMuI21pZGRsZXdhcmVGbnMsXG5cdFx0XHRjdHhUeXBlOiB0aGlzLiNjdHhUeXBlLFxuXHRcdFx0bWV0YWRhdGFTY2hlbWE6IHRoaXMuI21ldGFkYXRhU2NoZW1hLFxuXHRcdFx0bWV0YWRhdGE6IHRoaXMuI21ldGFkYXRhLFxuXHRcdFx0aW5wdXRTY2hlbWFGbjogdGhpcy4jaW5wdXRTY2hlbWFGbixcblx0XHRcdGJpbmRBcmdzU2NoZW1hczogdGhpcy4jYmluZEFyZ3NTY2hlbWFzLFxuXHRcdFx0b3V0cHV0U2NoZW1hOiB0aGlzLiNvdXRwdXRTY2hlbWEsXG5cdFx0XHR2YWxpZGF0aW9uQWRhcHRlcjogdGhpcy4jdmFsaWRhdGlvbkFkYXB0ZXIsXG5cdFx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IHRoaXMuI2hhbmRsZVZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdGhhbmRsZUJpbmRBcmdzVmFsaWRhdGlvbkVycm9yc1NoYXBlOiB0aGlzLiNoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZSxcblx0XHRcdHRocm93VmFsaWRhdGlvbkVycm9yczogdGhpcy4jdGhyb3dWYWxpZGF0aW9uRXJyb3JzLFxuXHRcdH0pLnN0YXRlQWN0aW9uKHNlcnZlckNvZGVGbiwgdXRpbHMpO1xuXHR9XG59O1xuXG4vLyBzcmMvbWlkZGxld2FyZS50c1xudmFyIGNyZWF0ZU1pZGRsZXdhcmUgPSAoKSA9PiB7XG5cdHJldHVybiB7XG5cdFx0ZGVmaW5lOiAobWlkZGxld2FyZUZuKSA9PiBtaWRkbGV3YXJlRm4sXG5cdH07XG59O1xuXG4vLyBzcmMvaW5kZXgudHNcbnZhciBjcmVhdGVTYWZlQWN0aW9uQ2xpZW50ID0gKGNyZWF0ZU9wdHMpID0+IHtcblx0Y29uc3QgaGFuZGxlU2VydmVyRXJyb3IgPVxuXHRcdGNyZWF0ZU9wdHM/LmhhbmRsZVNlcnZlckVycm9yIHx8XG5cdFx0KChlKSA9PiB7XG5cdFx0XHRjb25zb2xlLmVycm9yKFwiQWN0aW9uIGVycm9yOlwiLCBlLm1lc3NhZ2UpO1xuXHRcdFx0cmV0dXJuIERFRkFVTFRfU0VSVkVSX0VSUk9SX01FU1NBR0U7XG5cdFx0fSk7XG5cdHJldHVybiBuZXcgU2FmZUFjdGlvbkNsaWVudCh7XG5cdFx0bWlkZGxld2FyZUZuczogW2FzeW5jICh7IG5leHQgfSkgPT4gbmV4dCh7IGN0eDoge30gfSldLFxuXHRcdGhhbmRsZVNlcnZlckVycm9yLFxuXHRcdGlucHV0U2NoZW1hRm46IHZvaWQgMCxcblx0XHRiaW5kQXJnc1NjaGVtYXM6IFtdLFxuXHRcdG91dHB1dFNjaGVtYTogdm9pZCAwLFxuXHRcdHZhbGlkYXRpb25BZGFwdGVyOiBjcmVhdGVPcHRzPy52YWxpZGF0aW9uQWRhcHRlciA/PyB6b2RBZGFwdGVyKCksXG5cdFx0Ly8gdXNlIHpvZCBhZGFwdGVyIGJ5IGRlZmF1bHRcblx0XHRjdHhUeXBlOiB7fSxcblx0XHRtZXRhZGF0YVNjaGVtYTogY3JlYXRlT3B0cz8uZGVmaW5lTWV0YWRhdGFTY2hlbWE/LigpID8/IHZvaWQgMCxcblx0XHRtZXRhZGF0YTogdm9pZCAwLFxuXHRcdGRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IGNyZWF0ZU9wdHM/LmRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPz8gXCJmb3JtYXR0ZWRcIixcblx0XHR0aHJvd1ZhbGlkYXRpb25FcnJvcnM6IEJvb2xlYW4oY3JlYXRlT3B0cz8udGhyb3dWYWxpZGF0aW9uRXJyb3JzKSxcblx0XHRoYW5kbGVWYWxpZGF0aW9uRXJyb3JzU2hhcGU6IGFzeW5jICh2ZSkgPT5cblx0XHRcdGNyZWF0ZU9wdHM/LmRlZmF1bHRWYWxpZGF0aW9uRXJyb3JzU2hhcGUgPT09IFwiZmxhdHRlbmVkXCJcblx0XHRcdFx0PyBmbGF0dGVuVmFsaWRhdGlvbkVycm9ycyh2ZSlcblx0XHRcdFx0OiBmb3JtYXRWYWxpZGF0aW9uRXJyb3JzKHZlKSxcblx0XHRoYW5kbGVCaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnNTaGFwZTogYXN5bmMgKHZlKSA9PlxuXHRcdFx0Y3JlYXRlT3B0cz8uZGVmYXVsdFZhbGlkYXRpb25FcnJvcnNTaGFwZSA9PT0gXCJmbGF0dGVuZWRcIlxuXHRcdFx0XHQ/IGZsYXR0ZW5CaW5kQXJnc1ZhbGlkYXRpb25FcnJvcnModmUpXG5cdFx0XHRcdDogZm9ybWF0QmluZEFyZ3NWYWxpZGF0aW9uRXJyb3JzKHZlKSxcblx0fSk7XG59O1xuZXhwb3J0IHtcblx0QWN0aW9uTWV0YWRhdGFWYWxpZGF0aW9uRXJyb3IsXG5cdEFjdGlvbk91dHB1dERhdGFWYWxpZGF0aW9uRXJyb3IsXG5cdEFjdGlvblZhbGlkYXRpb25FcnJvcixcblx0REVGQVVMVF9TRVJWRVJfRVJST1JfTUVTU0FHRSxcblx0Y3JlYXRlTWlkZGxld2FyZSxcblx0Y3JlYXRlU2FmZUFjdGlvbkNsaWVudCxcblx0ZmxhdHRlbkJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyxcblx0ZmxhdHRlblZhbGlkYXRpb25FcnJvcnMsXG5cdGZvcm1hdEJpbmRBcmdzVmFsaWRhdGlvbkVycm9ycyxcblx0Zm9ybWF0VmFsaWRhdGlvbkVycm9ycyxcblx0cmV0dXJuVmFsaWRhdGlvbkVycm9ycyxcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5tanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(action-browser)/./node_modules/.pnpm/next-safe-action@7.10.4_next@15.2.1_@babel+core@7.24.5_@opentelemetry+api@1.9.0_react-d_111a2a00b79115b509a93fafd3c31e2b/node_modules/next-safe-action/dist/index.mjs\n");

/***/ })

};
;